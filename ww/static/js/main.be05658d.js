"use strict";
(self["webpackChunkweb_portal_main"] = self["webpackChunkweb_portal_main"] || []).push([[179],{

/***/ 8575:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {


// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9148);
// EXTERNAL MODULE: ./node_modules/react-dom/client.js
var client = __webpack_require__(9313);
;// CONCATENATED MODULE: ./src/App.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const App = ({});
// EXTERNAL MODULE: ./node_modules/react-router/dist/index.js
var dist = __webpack_require__(4600);
// EXTERNAL MODULE: ./node_modules/axios/lib/axios.js + 42 modules
var axios = __webpack_require__(7721);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(5948);
;// CONCATENATED MODULE: ./src/services/config.context.js
const ConfigContext=/*#__PURE__*/(0,react.createContext)();const ConfigContextProvider=_ref=>{let{children}=_ref;const[config,setConfig]=(0,react.useState)(null);const[isConfigReady,setIsConfigReady]=(0,react.useState)(false);(0,react.useEffect)(()=>{const loadConfig=async()=>{const res=await axios/* default */.Z.get("/portal/ui/conf/config.json");if(res!==null&&res!==void 0&&res.data){setConfig(res.data);setIsConfigReady(true);}};loadConfig();},[]);return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(ConfigContext.Provider,{value:{config,isConfigReady},children:children})});};/* harmony default export */ const config_context = (ConfigContext);
// EXTERNAL MODULE: ./node_modules/jwt-decode/build/jwt-decode.esm.js
var jwt_decode_esm = __webpack_require__(8166);
;// CONCATENATED MODULE: ./src/components/copyright.component.js
function CopyrightComponent(){const{config}=(0,react.useContext)(config_context);const clientName=config===null||config===void 0?void 0:config.clientName;const currentYear=new Date().getFullYear();return/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"text-center mt-3",children:["\xA9 ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"text-dark",children:clientName})," ",currentYear]});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Tooltip.js
var Tooltip = __webpack_require__(8858);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Navbar.js + 11 modules
var Navbar = __webpack_require__(971);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Container.js
var Container = __webpack_require__(2217);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Nav.js
var Nav = __webpack_require__(9538);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/OverlayTrigger.js
var OverlayTrigger = __webpack_require__(1788);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Button.js
var Button = __webpack_require__(9095);
// EXTERNAL MODULE: ./node_modules/@fortawesome/react-fontawesome/index.es.js + 1 modules
var index_es = __webpack_require__(7690);
// EXTERNAL MODULE: ./node_modules/@fortawesome/free-solid-svg-icons/index.mjs
var free_solid_svg_icons = __webpack_require__(1309);
;// CONCATENATED MODULE: ./src/components/nav.component.js
function NavComponent(){const{config}=(0,react.useContext)(config_context);const clientName=config===null||config===void 0?void 0:config.clientName;const uiVersion=config===null||config===void 0?void 0:config.version;const{user,logout,hasPermission,originalAdminSession,revertToAdminSession}=(0,react.useContext)(auth_context);const[isLoading,setIsLoading]=(0,react.useState)(true);(0,react.useEffect)(()=>{if(config){setIsLoading(false);}},[config]);const isAuthAdmin=hasPermission("user:write")||hasPermission("user:delete")||hasPermission("role:create")||hasPermission("role:delete");const navigate=(0,dist/* useNavigate */.s0)();const renderTooltip=(props,text)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"button-tooltip",...props,children:text});if(isLoading){return/*#__PURE__*/(0,jsx_runtime.jsx)(Navbar/* default */.Z,{hidden:user===null,variant:"dark",bg:"dark",expand:"lg",collapseOnSelect:true,fixed:"top",className:"shadow-sm",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z,{fluid:true,className:"justify-content-end p-3",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Navbar/* default */.Z.Brand,{className:"mx-auto"})})});}return/*#__PURE__*/(0,jsx_runtime.jsx)(Navbar/* default */.Z,{hidden:user===null,variant:"dark",bg:"dark",expand:"lg",collapseOnSelect:true,fixed:"top",className:"shadow-sm",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z,{fluid:true,className:"justify-content-end",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Navbar/* default */.Z.Brand,{className:"mx-auto",children:[clientName," - v",uiVersion]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Navbar/* default */.Z.Toggle,{"aria-controls":"basic-navbar-nav"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Navbar/* default */.Z.Collapse,{id:"basic-navbar-nav",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Nav/* default */.Z,{className:"ms-auto",children:[hasPermission('user:write')&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"bottom",overlay:props=>renderTooltip(props,'Reports'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{className:"mx-md-2 mb-3 mb-md-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"light btn-sm",className:"w-100",type:"button",onClick:()=>navigate("/dashboard"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faGauge */.Iz$,className:"text-dark"})})})}),isAuthAdmin&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"bottom",overlay:props=>renderTooltip(props,'Administration'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{className:"mx-md-2 mb-3 mb-md-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"light btn-sm",className:"w-100",type:"button"// onClick={() => navigate("/administration")}
,href:"".concat(config.baseUrl,"/idm/administration"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faLock */.byT,className:"text-dark"})})})}),originalAdminSession&&/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{className:"mx-md-2 mb-3 mb-md-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"warning btn-sm",className:"w-100",type:"button",onClick:revertToAdminSession,children:"Revert to Admin"})}),isAuthAdmin&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"bottom",overlay:props=>renderTooltip(props,'Distribution'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{className:"mx-md-2 mb-3 mb-md-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"light btn-sm",className:"w-100",type:"button",onClick:()=>navigate("/distribution"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faScaleBalanced */.qZB,className:"text-dark"})})})}),isAuthAdmin&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"bottom",overlay:props=>renderTooltip(props,'Sku Management'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{className:"mx-md-2 mb-3 mb-md-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"light btn-sm",className:"w-100",type:"button",onClick:()=>navigate("/skus"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faBarcode */.VdD,className:"text-dark"})})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"bottom",overlay:props=>renderTooltip(props,'Account Management'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{className:"mx-md-2 mb-3 mb-md-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"light btn-sm",className:"w-100",type:"button"// onClick={() => navigate("/home")}
,href:"".concat(config.baseUrl,"/idm/home"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faUser */.ILF,className:"text-dark"})})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"bottom",overlay:props=>renderTooltip(props,'Home'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{className:"mx-md-2 mb-3 mb-md-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"light btn-sm",className:"w-100",type:"button",onClick:()=>navigate("/"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faHouse */.wp6,className:"text-dark"})})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"bottom",overlay:props=>renderTooltip(props,'Logout'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{className:"mx-md-2 mb-3 mb-md-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"light btn-sm",className:"w-100",type:"button",title:"Logout",onClick:()=>logout(),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faRightFromBracket */.mXR,className:"text-dark"})})})})]})})]})});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Card.js + 2 modules
var Card = __webpack_require__(558);
;// CONCATENATED MODULE: ./src/services/auth.header.js
function authHeader(){const token=localStorage.getItem('accessToken');if(token){return{headers:{Authorization:'Bearer '+token}};}return{};}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Badge.js
var Badge = __webpack_require__(3066);
;// CONCATENATED MODULE: ./src/components/shared/order.assigned.component.js
function OrderAssignedComponent(_ref){let{totalAssigned}=_ref;return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("h5",{children:["Assigned Orders ",/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{variant:"dark",className:"bg-dark",children:totalAssigned})]})});}
;// CONCATENATED MODULE: ./src/components/welcome.component.js
function Welcome(_ref){let{user,details,greeting="Welcome",totalAssigned}=_ref;const displayName=user!==null&&user!==void 0&&user.firstName&&user!==null&&user!==void 0&&user.lastName?"".concat(user.firstName," ").concat(user.lastName):user.email;return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[user!==null&&details!==null&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-content-between flex-column flex-md-row",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Card/* default */.Z.Title,{children:[greeting," ",displayName]}),totalAssigned!==undefined&&/*#__PURE__*/(0,jsx_runtime.jsx)(OrderAssignedComponent,{totalAssigned:totalAssigned})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{className:"mt-1"})]});}
;// CONCATENATED MODULE: ./src/services/order.service.js
class OrderService{constructor(baseUrl){this.baseUrl=baseUrl;}getDetails(orderId){return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/workobject/order/").concat(orderId,"/details"),authHeader());}async getAssignedOrders(userID){let pageNumber=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;let pageSize=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;let searchParams=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};let payload={page:pageNumber,pageSize:pageSize,assignedTo:[userID],...searchParams};return axios/* default */.Z.post("".concat(this.baseUrl,"/portal/api/v1/WorkObject/search"),payload,authHeader());}uploadAttachment(file,workObjectId,imageType,lineItemId){let data=new FormData();data.append('file',file);let config={method:'post',maxBodyLength:Infinity,url:"".concat(this.baseUrl,"/portal/api/v1/Attachment/upload/").concat(workObjectId,"/").concat(imageType,"/").concat(lineItemId),headers:{'Content-Type':'multipart/form-data',...authHeader().headers},data:data};return axios/* default */.Z.request(config);}bulkAssign(orderIds,userId){return axios/* default */.Z.post("".concat(this.baseUrl,"/portal/api/v1/workobject/assign/bulk"),{userId:userId,shopifyOrderIds:orderIds},authHeader());}manuallyAssign(workObjectId,ArtistId,PrintFileDesignerId){return axios/* default */.Z.patch("".concat(this.baseUrl,"/portal/api/v1/workobject/").concat(workObjectId,"/assign/override"),{ArtistId:ArtistId,PrintFileDesignerId:PrintFileDesignerId},authHeader());}returnOrder(workObjectId,status,comment,resetAttachments){return axios/* default */.Z.patch("".concat(this.baseUrl,"/portal/api/v1/WorkObject/").concat(workObjectId,"/return/").concat(status),{"comment":comment,"resetAttachments":resetAttachments},authHeader());}cancelOrder(workObjectId){let config={method:'patch',maxBodyLength:Infinity,url:"".concat(this.baseUrl,"/portal/api/v1/WorkObject/").concat(workObjectId,"/status/8000"),headers:{'accept':'text/plain',...authHeader().headers}};return axios/* default */.Z.request(config);}updateShippingAddress(orderId,shippingAddress){return axios/* default */.Z.patch("".concat(this.baseUrl,"/portal/api/v1/order/").concat(orderId,"/address"),shippingAddress,authHeader());}updateLineItem(orderId,lineItemId,qauntity,sku,shippingMethod){return axios/* default */.Z.patch("".concat(this.baseUrl,"/portal/api/v1/order/").concat(orderId,"/lineitem/").concat(lineItemId),{quantity:parseInt(qauntity),sku:sku,shippingMethod:parseInt(shippingMethod)},authHeader());}addTag(workObjectId,tag){let config={method:'patch',url:"".concat(this.baseUrl,"/portal/api/v1/WorkObject/").concat(workObjectId,"/tag/").concat(tag),headers:{'accept':'text/plain',...authHeader().headers}};return axios/* default */.Z.request(config);}deleteTag(workObjectId,tag){return axios/* default */.Z.delete("".concat(this.baseUrl,"/portal/api/v1/WorkObject/").concat(workObjectId,"/tag/").concat(tag),authHeader());}forceTransition(workObjectId){console.log(workObjectId);let config={method:'patch',url:"".concat(this.baseUrl,"/portal/api/v1/WorkObject/").concat(workObjectId,"/push"),headers:{'accept':'text/plain',...authHeader().headers}};return axios/* default */.Z.request(config);}}
;// CONCATENATED MODULE: ./src/services/auth.context.js
const AuthContext=/*#__PURE__*/(0,react.createContext)();const AuthContextProvider=_ref=>{let{children}=_ref;const{config}=(0,react.useContext)(config_context);const baseUrl="".concat(config===null||config===void 0?void 0:config.baseUrl);const userUrl="".concat(config===null||config===void 0?void 0:config.authUrl,"/v1/user");const authRefreshTokenUrl="".concat(config===null||config===void 0?void 0:config.authUrl,"/v1/Authentication/refresh");const[totalAssigned,setTotalAssigned]=(0,react.useState)(0);const[orderService,setOrderService]=(0,react.useState)(null);const[details,setDetails]=(0,react.useState)(()=>{if(localStorage.getItem("userDetails")){const details=JSON.parse(localStorage.getItem("userDetails"));return details;}return null;});const[originalAdminSession,setOriginalAdminSession]=(0,react.useState)(()=>{if(localStorage.getItem("adminSession")){return JSON.parse(localStorage.getItem("adminSession"));}return null;});const[user,setUser]=(0,react.useState)(()=>{if(localStorage.getItem("accessToken")){const accessToken=localStorage.getItem('accessToken');const details=(0,jwt_decode_esm/* default */.Z)(accessToken);const expiresOn=details.exp*1000;const now=Date.now();if(now>expiresOn){return null;}return details;}return null;});const revertToAdminSession=()=>{const adminSession=JSON.parse(localStorage.getItem("adminSession"));if(adminSession){localStorage.setItem("accessToken",adminSession.accessToken);localStorage.setItem("refreshToken",adminSession.refreshToken);localStorage.setItem("userDetails",JSON.stringify(adminSession.details));setUser(adminSession.user);setDetails(adminSession.details);localStorage.removeItem("adminSession");setOriginalAdminSession(null);}};const logout=(0,react.useCallback)(async()=>{localStorage.removeItem("accessToken");localStorage.removeItem("userDetails");localStorage.removeItem("refreshToken");window.location.href="".concat(baseUrl,"/idm/login");},[baseUrl]);(0,react.useEffect)(()=>{if(!user)return;if(config!==null&&orderService===null){setOrderService(new OrderService(config.baseUrl));}const fetchAssignedOrders=()=>{if(orderService!==null){orderService.getAssignedOrders(user.id,1,0,null).then(res=>{setTotalAssigned(res.data.totalItems);});}};//should these be in an auth service?
const refreshToken=async()=>{const existingRefreshToken=localStorage.getItem('refreshToken');if(!existingRefreshToken)return;try{const{data}=await axios/* default */.Z.post("".concat(authRefreshTokenUrl,"/").concat(existingRefreshToken),null,authHeader());localStorage.setItem("accessToken",data.accessToken);localStorage.setItem("refreshToken",data.refreshToken);localStorage.setItem("userDetails",JSON.stringify(data.user));}catch(error){logout();}};const checkTokenExpiration=()=>{const accessToken=localStorage.getItem('accessToken');if(!accessToken)return;const decodedToken=(0,jwt_decode_esm/* default */.Z)(accessToken);const expiresOn=decodedToken.exp*1000;const now=Date.now();const minutesToExpire=(expiresOn-now)/(1000*60);if(minutesToExpire<5){// Refresh token 5 minutes before it expires
refreshToken();}};const tokenIntervalId=setInterval(()=>{checkTokenExpiration();},30000);// Check every 30 seconds
// Fetch assigned orders the first time the component is loaded
if(orderService!==null&&totalAssigned===0){fetchAssignedOrders();}const intervalId=setInterval(()=>{fetchAssignedOrders();},300000);// Check every 5 minute
// Remove intervals on component unmount
return()=>{clearInterval(intervalId);clearInterval(tokenIntervalId);};},[config,orderService,user,totalAssigned,logout,authRefreshTokenUrl]);const hasPermission=permission=>{if(!user)return false;if(!user.role)return false;return user.role.indexOf(permission)>-1;};const getUser=async id=>{return await axios/* default */.Z.get("".concat(userUrl,"/").concat(id),authHeader());};return/*#__PURE__*/(0,jsx_runtime.jsx)(AuthContext.Provider,{value:{user,details,logout,baseUrl,hasPermission,getUser,totalAssigned,setTotalAssigned,revertToAdminSession,originalAdminSession},children:user?/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(NavComponent,{}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z,{fluid:true,className:"pt-5 mt-4",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Welcome,{user:user,totalAssigned:totalAssigned}),children]}),/*#__PURE__*/(0,jsx_runtime.jsx)(CopyrightComponent,{})]}):/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z,{fluid:true,className:"login d-flex justify-content-center align-items-center min-vh-100",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Card/* default */.Z,{className:"col-12 col-lg-6 shadow mx-auto p-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.Z.Body,{className:"text-center",children:children}),/*#__PURE__*/(0,jsx_runtime.jsx)(CopyrightComponent,{})]})})})});};/* harmony default export */ const auth_context = (AuthContext);
;// CONCATENATED MODULE: ./src/services/lookup.service.js
class LookupService{constructor(baseUrl){this.baseUrl=baseUrl;}getWorkObjectStatusLookup(){return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/lookup/workobject/status"),authHeader());}getUsers(){const payload={page:1,pageSize:1000};return axios/* default */.Z.post("".concat(this.baseUrl,"/api/v1/user/search"),payload,authHeader());}getProductShippingProfiles(){return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/lookup/shopify/shippingprofiles"),authHeader());}getProducts(){return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/lookup/shopify/products"),authHeader());}getProductBySku(sku){return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/lookup/shopify/products/").concat(sku),authHeader());}createProduct(product){return axios/* default */.Z.post("".concat(this.baseUrl,"/portal/api/v1/storeproduct"),product,authHeader());}updateProduct(sku,product){product.shippingMethod=parseInt(product.shippingMethod);product.sensariaProductId=parseInt(product.sensariaProductId);product.numberOfCxImages=parseInt(product.numberOfCxImages);return axios/* default */.Z.post("".concat(this.baseUrl,"/portal/api/v1/storeproduct/").concat(sku),product,authHeader());}deleteProduct(sku){return axios/* default */.Z.delete("".concat(this.baseUrl,"/portal/api/v1/storeproduct/").concat(sku),authHeader());}}
;// CONCATENATED MODULE: ./src/services/attatchment.service.js
class AttachmentService{constructor(baseUrl){this.baseUrl=baseUrl;}uploadAttachment(file,workObjectId,imageType,lineItemId,cxPhotoIndex){let data=new FormData();data.append('file',file);let url="".concat(this.baseUrl,"/portal/api/v1/Attachment/upload/").concat(workObjectId,"/").concat(imageType,"/").concat(lineItemId);// Add the cxPhotoIndex parameter if it's not null
if(cxPhotoIndex!==null){url+="?cxPhotoIndex=".concat(cxPhotoIndex);}let config={method:'post',url:url,headers:{'Content-Type':'multipart/form-data',...authHeader().headers},data:data};return axios/* default */.Z.request(config);}bulkUploadAttachment(file,imageType){let data=new FormData();data.append('file',file);// let url = `https://ww-upload-proxy.ecomgraduates.workers.dev/upload/${imageType}`;
let url="".concat(this.baseUrl,"/portal/api/v1/Attachment/upload/").concat(imageType);let config={method:'post',url:url,headers:{'Content-Type':'multipart/form-data',...authHeader().headers},data:data};return axios/* default */.Z.request(config);}deleteAttatchment(id,attachmentId){return axios/* default */.Z.delete("".concat(this.baseUrl,"/portal/api/v1/attachment/").concat(id,"/attachment/").concat(attachmentId),authHeader());}}
;// CONCATENATED MODULE: ./src/services/order.comments.service.js
class CommentsService{constructor(baseUrl){this.baseUrl=baseUrl;}newComment(orderId,message){return axios/* default */.Z.post("".concat(this.baseUrl,"/portal/api/v1/comment/").concat(orderId),{message:message},authHeader());}replyToComment(orderId,message,commentId){return axios/* default */.Z.post("".concat(this.baseUrl,"/portal/api/v1/comment/").concat(orderId,"/").concat(commentId),{message:message},authHeader());}deleteComment(orderId,commentId){return axios/* default */.Z.delete("".concat(this.baseUrl,"/portal/api/v1/comment/").concat(orderId,"/").concat(commentId),authHeader());}}
;// CONCATENATED MODULE: ./src/services/distribution.service.js
class DistributionService{constructor(baseUrl){this.getUsersCapacity=(type,average)=>{return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/distribution/queue/").concat(type,"/avg/30"),authHeader());};this.baseUrl=baseUrl;}getAverageDailyOrders(days){return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/WorkObject/average/daily/").concat(days),authHeader());}setUserDistribution(userId,distributionType,distribution){return axios/* default */.Z.patch("".concat(this.baseUrl,"/portal/api/v1/distribution/user/").concat(userId,"/").concat(distributionType,"/").concat(distribution),{},authHeader());}}
;// CONCATENATED MODULE: ./src/services/download.service.js
class DownloadService{constructor(baseUrl){this.baseUrl=baseUrl;}getDetails(orderId){return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/workobject/order/").concat(orderId,"/details"),authHeader());}async bulkDownload(imageTypes,targetWorkObjectIds){let payload={"imageTypes":imageTypes,"targetWorkObjectIds":targetWorkObjectIds};return axios/* default */.Z.post("".concat(this.baseUrl,"/portal/api/v1/bulkdownload"),payload,authHeader());}}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Toast.js + 4 modules
var Toast = __webpack_require__(6459);
;// CONCATENATED MODULE: ./src/components/shared/toast.alert.component.js
function ToastAlert(_ref){let{show,onClose,message,variant='success'}=_ref;const isWhiteText=['dark','danger','info','success','warning'].includes(variant);return/*#__PURE__*/(0,jsx_runtime.jsxs)(Toast/* default */.Z,{onClose:onClose,show:show,delay:5000,autohide:true,bg:variant,className:"mb-2 shadow-sm",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Toast/* default */.Z.Header,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{className:"me-auto text-".concat(variant),children:variant.toUpperCase()})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Toast/* default */.Z.Body,{className:isWhiteText?'text-white':'',children:message})]});};
;// CONCATENATED MODULE: ./src/components/shared/toast.container.component.js
const ToastContainer=()=>{const{toasts,hideToastNotification}=(0,react.useContext)(cache_context);return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",children:toasts.map(toast=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"toast-box",children:/*#__PURE__*/(0,jsx_runtime.jsx)(ToastAlert,{show:true,onClose:()=>hideToastNotification(toast.id),message:toast.message,variant:toast.variant})},toast.id))});};/* harmony default export */ const toast_container_component = (ToastContainer);
;// CONCATENATED MODULE: ./src/services/dashboard.service.js
class DashboardService{constructor(baseUrl){this.baseUrl=baseUrl;}getCharts(){return axios/* default */.Z.get("".concat(this.baseUrl,"/portal/api/v1/dashboard"),authHeader());}getOrdersByStatus(payload){return axios/* default */.Z.post("".concat(this.baseUrl,"/portal/api/v1/WorkObject/search"),payload,authHeader());}}
;// CONCATENATED MODULE: ./src/services/cache.context.js
const CacheContext=/*#__PURE__*/(0,react.createContext)();const CacheContextProvider=_ref=>{let{children}=_ref;const{config,isConfigReady}=(0,react.useContext)(config_context);const[statuscache,setStatusCache]=(0,react.useState)(null);const[userscache,setUsersCache]=(0,react.useState)(null);const[productscache,setProductsCache]=(0,react.useState)(null);const[productshippingprofiles,setProductShippingProfiles]=(0,react.useState)(null);const[lookupService,setLookupService]=(0,react.useState)(null);const[distributionService,setDistributionService]=(0,react.useState)(null);const[orderService,setOrderService]=(0,react.useState)(null);const[downloadService,setDownloadService]=(0,react.useState)(null);const[dashboardService,setDashboardService]=(0,react.useState)(null);const[attachmentService,setAttachmentService]=(0,react.useState)(null);const[commentsService,setCommentsService]=(0,react.useState)(null);const[toasts,setToasts]=(0,react.useState)([]);const toastCounter=(0,react.useRef)(0);//using ref to keep track of toast id counter state didn't work
const showToastNotification=function(message){let variant=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';const newId="toast-".concat(toastCounter.current);setToasts(prevToasts=>[...prevToasts,{id:newId,message,variant}]);toastCounter.current+=1;};const hideToastNotification=id=>{setToasts(prevToasts=>prevToasts.filter(toast=>toast.id!==id));};(0,react.useEffect)(()=>{if(isConfigReady&&config!==null){setLookupService(new LookupService(config.baseUrl));setOrderService(new OrderService(config.baseUrl));setDashboardService(new DashboardService(config.baseUrl));setAttachmentService(new AttachmentService(config.baseUrl));setCommentsService(new CommentsService(config.baseUrl));setDistributionService(new DistributionService(config.baseUrl));setDownloadService(new DownloadService(config.baseUrl));}},[isConfigReady,config]);const getUserById=userId=>{return getUserList().then(res=>{const targetUser=res.find(user=>user.id===userId);if(targetUser!==undefined){if(targetUser.metadata.firstName===undefined||targetUser.metadata.lastName===undefined){return targetUser.metadata.email;}else{return"".concat(targetUser.metadata.firstName," ").concat(targetUser.metadata.lastName);}}else{return userId;}},err=>{return Promise.resolve('Failed to locate user.');});};const getWorkObjectStatusLookup=()=>{if(statuscache!==null){return Promise.resolve(statuscache);}else{return lookupService.getWorkObjectStatusLookup().then(res=>{setStatusCache(res.data);return res.data;});}};const getUserList=()=>{if(userscache!==null){return Promise.resolve(userscache);}else{return lookupService.getUsers().then(res=>{setUsersCache(res.data.results);return res.data.results;});}};const getProductShippingProfiles=()=>{if(productshippingprofiles!==null){return Promise.resolve(productshippingprofiles);}else{return lookupService.getProductShippingProfiles().then(res=>{setProductShippingProfiles(res.data);return res.data;});}};const getProductsCache=()=>{if(productscache!==null){return Promise.resolve(productscache);}else{return lookupService.getProducts().then(res=>{setProductsCache(res.data);return res.data;});}};return/*#__PURE__*/(0,jsx_runtime.jsxs)(CacheContext.Provider,{value:{getWorkObjectStatusLookup,getUserList,getUserById,getProductShippingProfiles,setProductShippingProfiles,productshippingprofiles,getProductsCache,setProductsCache,productscache,orderService,dashboardService,distributionService,downloadService,lookupService,attachmentService,commentsService,showToastNotification,hideToastNotification,toasts},children:[lookupService!==null&&children,/*#__PURE__*/(0,jsx_runtime.jsx)(toast_container_component,{})]});};/* harmony default export */ const cache_context = (CacheContext);
;// CONCATENATED MODULE: ./src/services/protected.route.js
const ProtectedRoute=_ref=>{let{children,permission}=_ref;const{user,hasPermission}=(0,react.useContext)(auth_context);if(user){if(permission!==null&&permission!==undefined){// Authorization check
if(hasPermission(permission)){return children;}}else{// Authenticated check
return children;}}// TODO: Unauthorized page?
return/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Navigate */.Fg,{to:"/unauthorized"});};/* harmony default export */ const protected_route = (ProtectedRoute);
;// CONCATENATED MODULE: ./src/components/unauthorized.component.js
function Unauthorized(){const{user}=(0,react.useContext)(auth_context);const{config}=(0,react.useContext)(config_context);const[isLoading,setIsLoading]=(0,react.useState)(true);(0,react.useEffect)(()=>{if(config){setIsLoading(false);}},[config]);if(isLoading){return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h1",{className:"text-center",children:"Not Authorized"}),/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faWarning */.e7M,className:"text-warning",size:"6x"}),/*#__PURE__*/(0,jsx_runtime.jsx)("h5",{className:"text-center",children:"You're not authorized to view this page"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("h5",{className:"text-center",children:["Click ",/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"/",children:"here"})," to return."]})]});}return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:user!==null?/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h1",{className:"text-center",children:"Not Authorized"}),/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faWarning */.e7M,className:"text-warning",size:"6x"}),/*#__PURE__*/(0,jsx_runtime.jsx)("h5",{className:"text-center",children:"You're not authorized to view this page"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("h5",{className:"text-center",children:["Click ",/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"/",children:"here"})," to return."]})]}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h1",{className:"text-center",children:"Not Logged In"}),/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faWarning */.e7M,className:"text-warning",size:"6x"}),/*#__PURE__*/(0,jsx_runtime.jsx)("h5",{className:"text-center",children:"You're not logged in"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("h5",{className:"text-center",children:["Login ",/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"".concat(config.baseUrl,"/idm/login"),children:"here"})]})]})});}
;// CONCATENATED MODULE: ./src/utils/copyToClipboard.js
function copyToClipboard(text){const textArea=document.createElement('textarea');textArea.value=text;document.body.appendChild(textArea);textArea.select();document.execCommand('copy');document.body.removeChild(textArea);};
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Table.js
var Table = __webpack_require__(9655);
// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/index.js
var react_router_dom_dist = __webpack_require__(2034);
// EXTERNAL MODULE: ./node_modules/@fortawesome/free-brands-svg-icons/index.mjs
var free_brands_svg_icons = __webpack_require__(6156);
;// CONCATENATED MODULE: ./src/components/shared/status.component.js
function StatusBadgeComponent(_ref){let{status}=_ref;const{config}=(0,react.useContext)(config_context);const currentStatus=config.statusMap[status.toString()]||{text:'Unknown Status',variant:'bg-dark'};return/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:currentStatus.variant,children:currentStatus.text});}
;// CONCATENATED MODULE: ./src/components/shared/sensariaStatus.component.js
function SensariaStatusBadgeComponent(_ref){let{status}=_ref;const{config}=(0,react.useContext)(config_context);const renderTooltip=(props,text)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"button-tooltip",...props,children:text});const currentStatus=config.sensariaStatusMap[status.toString()]||{text:'Unknown Status',variant:'bg-dark'};return/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,currentStatus.text),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:currentStatus.variant,children:currentStatus.title})});}
// EXTERNAL MODULE: ./node_modules/moment-timezone/index.js
var moment_timezone = __webpack_require__(1489);
var moment_timezone_default = /*#__PURE__*/__webpack_require__.n(moment_timezone);
;// CONCATENATED MODULE: ./src/utils/convertToEasternTime.js
function convertToEasternTime(isoDateString){let split=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let useDateString=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const dateObject=moment_timezone_default()(isoDateString);if(dateObject.isValid()){// Convert to Eastern Time
const easternTime=dateObject.tz('America/New_York');if(split){// Format date and time for split display
const date=easternTime.format('MM/DD/YYYY');const time=easternTime.format('hh:mm:ss A');return/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{children:[date,/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),time]});}else if(useDateString){return moment_timezone_default()(isoDateString).tz('America/New_York').format();}else{// Format date and time for same line display
const formattedTime=easternTime.format('MM/DD/YYYY hh:mm:ss A');return/*#__PURE__*/(0,jsx_runtime.jsx)("span",{children:formattedTime});}}else{console.log("Invalid date: ".concat(isoDateString));// Return a message for invalid date
return null;}}
;// CONCATENATED MODULE: ./src/components/search/order.table.row.component.js
function OrderTableRowComponent(_ref){var _order$metadata,_order$metadata$fulfi,_order$metadata$fulfi2,_order$metadata2,_order$metadata2$line;let{order,onPopOverOpen,onCheckboxChange,index,selectedOrders,selectedOrderNames}=_ref;const{hasPermission}=(0,react.useContext)(auth_context);const{config}=(0,react.useContext)(config_context);const{getUserList}=(0,react.useContext)(cache_context);const[assignedTo,setAssignedTo]=(0,react.useState)("");const isSelected=selectedOrders.some(selectedOrder=>selectedOrder.id===order.shopifyOrderId);const handleBadgeClick=event=>{onCheckboxChange(event,!isSelected,order.shopifyOrderId,order.orderName,order.id,order.status,index);};(0,react.useEffect)(()=>{Promise.all([getUserList()]).then(_ref2=>{let[userList]=_ref2;const assignedUser=userList.find(user=>user.id===order.assignedTo);if(assignedUser!==undefined){const{firstName,lastName}=assignedUser.metadata;setAssignedTo("".concat(firstName," ").concat(lastName));}else{setAssignedTo(order.assignedTo);}});},[order,getUserList]);const style1={maxWidth:'2rem',overflow:'hidden'};return/*#__PURE__*/(0,jsx_runtime.jsxs)("tr",{className:isSelected?'table-active':'',children:[/*#__PURE__*/(0,jsx_runtime.jsx)("td",{style:style1,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{pill:true,bg:isSelected?'dark text-white':'secondary',onClick:handleBadgeClick,style:{cursor:'pointer'},children:[order.orderName," ",isSelected?/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faCheckCircle */.f8k}):null]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{style:style1,children:convertToEasternTime(order.workObjectCreatedOn)}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{style:style1,children:/*#__PURE__*/(0,jsx_runtime.jsx)(StatusBadgeComponent,{status:order.status})}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{style:style1,children:(_order$metadata=order.metadata)===null||_order$metadata===void 0?void 0:(_order$metadata$fulfi=_order$metadata.fulfillmentTracker)===null||_order$metadata$fulfi===void 0?void 0:(_order$metadata$fulfi2=_order$metadata$fulfi.LineItems)===null||_order$metadata$fulfi2===void 0?void 0:_order$metadata$fulfi2.map((lineItem,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)(SensariaStatusBadgeComponent,{status:lineItem.Status},index))}),/*#__PURE__*/(0,jsx_runtime.jsxs)("td",{className:"td-tags",children:[(_order$metadata2=order.metadata)===null||_order$metadata2===void 0?void 0:(_order$metadata2$line=_order$metadata2.lineItems)===null||_order$metadata2$line===void 0?void 0:_order$metadata2$line.map((lineItem,index)=>{var _lineItem$LineItem;return/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{pill:true,bg:"light border text-dark",className:"me-1",size:"sm",children:lineItem===null||lineItem===void 0?void 0:(_lineItem$LineItem=lineItem.LineItem)===null||_lineItem$LineItem===void 0?void 0:_lineItem$LineItem.Name},"".concat(order.id,"-").concat(order.shopifyOrderId,"-").concat(order.orderNumber,"-").concat(lineItem.id,"-lineItemSkuTag-").concat(index));}),order.tags.map((tag,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{pill:true,bg:"light border text-dark",className:"me-1",size:"sm",children:tag},"".concat(order.orderId,"-").concat(order.shopifyOrderId,"-").concat(order.orderNumber,"-orderTag-").concat(index)))]}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{style:style1,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{pill:true,bg:"dark",children:assignedTo})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("td",{className:"text-end",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{onClick:event=>onPopOverOpen(event,order.shopifyOrderId),variant:"secondary",className:"me-1",size:"sm",children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faEye */.Mdf})}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_router_dom_dist/* Link */.rU,{to:"/details/".concat(order.shopifyOrderId),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"",className:"me-1 btn-brand",size:"sm",children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faEdit */.Xcf})})}),hasPermission('user:write')?/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{href:"".concat(config.shopifyUrl,"/admin/orders/").concat(order.shopifyOrderId),rel:"noopener noreferrer",target:"_blank",variant:"success",className:"me-1 bg-shopify",size:"sm",children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_brands_svg_icons/* faShopify */.yvx})}):null]})]});}
;// CONCATENATED MODULE: ./src/components/search/order.table.component.js
function OrderTableComponent(_ref){let{results,onPopOverOpen,onCheckboxChange,selectedOrders,selectedOrderNames}=_ref;const renderTooltip=(props,text)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"button-tooltip",...props,children:text});return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(results===null||results===void 0?void 0:results.totalItems)===0?/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-muted text-center",children:"No results were found..."}):/*#__PURE__*/(0,jsx_runtime.jsxs)(Table/* default */.Z,{striped:true,bordered:true,hover:true,className:"rounded-table",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("thead",{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("tr",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Order #"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("th",{children:["Received On",/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'This is the date and time the order was received by the system.'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{className:"text-muted ms-1",size:"sm",icon:free_solid_svg_icons/* faCircleQuestion */.FDd})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("th",{children:["Status",/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'This is the current status of the order.'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{className:"text-muted ms-1",size:"sm",icon:free_solid_svg_icons/* faCircleQuestion */.FDd})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("th",{children:["Sensaria Status",/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'This is the current status provided by Sensaria.'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{className:"text-muted ms-1",size:"sm",icon:free_solid_svg_icons/* faCircleQuestion */.FDd})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("th",{children:["Tags",/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'These are the tags associated with the order.'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{className:"text-muted ms-1",size:"sm",icon:free_solid_svg_icons/* faCircleQuestion */.FDd})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("th",{children:["Assigned To",/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'This is the person the order is assigned to.'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{className:"text-muted ms-1",size:"sm",icon:free_solid_svg_icons/* faCircleQuestion */.FDd})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("tbody",{children:results===null||results===void 0?void 0:results.results.map((order,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)(OrderTableRowComponent,{index:index,order:order,onPopOverOpen:onPopOverOpen,selectedOrders:selectedOrders,selectedOrderNames:selectedOrderNames,onCheckboxChange:onCheckboxChange},order.id))})]})});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Pagination.js + 1 modules
var Pagination = __webpack_require__(4378);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Form.js + 12 modules
var Form = __webpack_require__(9476);
;// CONCATENATED MODULE: ./src/components/shared/pagination.component.js
function PaginationComponent(_ref){let{page,totalItems,pageSize,setPage,setPageSize}=_ref;const totalPages=Math.ceil(totalItems/pageSize);const startPage=Math.max(1,page-2);const endPage=Math.min(totalPages,page+3);const pages=[];for(let number=startPage;number<=endPage;number++){pages.push(/*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z.Item,{active:number===page,onClick:()=>setPage(number),children:number},number));}return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-content-center",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Pagination/* default */.Z,{className:"custom-pagination",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z.First,{onClick:()=>setPage(1),disabled:page===1}),/*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z.Prev,{onClick:()=>setPage(page-1),disabled:page===1}),startPage>1&&/*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z.Ellipsis,{}),pages,endPage<totalPages&&/*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z.Ellipsis,{}),/*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z.Next,{onClick:()=>setPage(page+1),disabled:page===totalPages}),/*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z.Last,{onClick:()=>setPage(totalPages),disabled:page===totalPages})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Group,{className:"d-inline ms-2",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Select,{value:pageSize,onChange:e=>setPageSize(Number(e.target.value)),children:[/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:10,children:"10"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:20,children:"20"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:30,children:"30"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:40,children:"40"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:50,children:"50"})]})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"ml-3",children:"Showing page ".concat(page," of ").concat(totalPages," for ").concat(totalItems," results")})]});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Spinner.js
var Spinner = __webpack_require__(8407);
;// CONCATENATED MODULE: ./src/components/shared/loading.component.js
function LoadingComponent(_ref){let{message,variant="primary",size}=_ref;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Spinner/* default */.Z,{animation:"border",role:"status",variant:variant,size:size,children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"visually-hidden",children:message?message:"Loading..."})}),message&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-muted",children:message})]});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/ListGroup.js + 1 modules
var ListGroup = __webpack_require__(6790);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Overlay.js + 61 modules
var Overlay = __webpack_require__(7797);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Popover.js + 2 modules
var Popover = __webpack_require__(6913);
;// CONCATENATED MODULE: ./src/components/search/order.popover.component.js
const renderLineItems=order=>{var _order$workObject$met,_order$workObject,_order$workObject$met2;const lineItems=(_order$workObject$met=order===null||order===void 0?void 0:(_order$workObject=order.workObject)===null||_order$workObject===void 0?void 0:(_order$workObject$met2=_order$workObject.metadata)===null||_order$workObject$met2===void 0?void 0:_order$workObject$met2.lineItems)!==null&&_order$workObject$met!==void 0?_order$workObject$met:[];if(lineItems.length===0){return/*#__PURE__*/(0,jsx_runtime.jsx)(ListGroup/* default */.Z.Item,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-center text-muted",children:"Line items not found"})});}return lineItems.map((item,idx)=>/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:item.LineItem.Name.split('-')[0]})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"badge bg-brand mb-1 rounded-pill",children:item.LineItem.Name.split('-')[1]})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{})]},idx));};function OrderPopoverComponent(_ref){var _order$workObject$met3,_order$workObject$met4;let{show,target,onClose,orderId}=_ref;const{config}=(0,react.useContext)(config_context);const{orderService}=(0,react.useContext)(cache_context);const[order,setOrder]=(0,react.useState)(null);const[isLoading,setIsLoading]=(0,react.useState)(true);(0,react.useEffect)(()=>{setIsLoading(true);orderService.getDetails(orderId).then(res=>{setOrder(res.data);},err=>{console.log(err);}).finally(()=>{setIsLoading(false);});},[orderId,orderService,config]);return/*#__PURE__*/(0,jsx_runtime.jsx)(Overlay/* default */.Z,{show:show,target:target,placement:"left",rootClose:true,onHide:onClose,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Popover/* default */.Z,{id:"popover-contained",className:"shadow",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Popover/* default */.Z.Header,{as:"h3",children:order&&!isLoading&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[order.workObject&&/*#__PURE__*/(0,jsx_runtime.jsx)(StatusBadgeComponent,{status:order.workObject.status}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-dark float-end",children:(_order$workObject$met3=(_order$workObject$met4=order.workObject.metadata.lineItems)===null||_order$workObject$met4===void 0?void 0:_order$workObject$met4.length)!==null&&_order$workObject$met3!==void 0?_order$workObject$met3:'0'})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Popover/* default */.Z.Body,{children:isLoading?/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{message:"Loading order details...",size:"sm",variant:"dark"}):order?/*#__PURE__*/(0,jsx_runtime.jsx)(ListGroup/* default */.Z,{className:"shadow-sm",children:renderLineItems(order)}):/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"alert alert-danger",role:"alert",children:"Order not found"})})]})});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Row.js
var Row = __webpack_require__(8588);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Col.js
var Col = __webpack_require__(462);
// EXTERNAL MODULE: ./node_modules/react-select/dist/react-select.esm.js + 45 modules
var react_select_esm = __webpack_require__(4515);
;// CONCATENATED MODULE: ./src/components/search/order.filter.component.js
// import { convertToEasternTime } from "../../utils/convertToEasternTime";
function OrderFilterComponent(_ref){let{onSearch,selectedOrders,selectedWorkObjectIds,setShowBulkAssignModal,setShowBulkDownloadModal,handleDeselectAll}=_ref;const{user,hasPermission}=(0,react.useContext)(auth_context);const{getUserList,getWorkObjectStatusLookup}=(0,react.useContext)(cache_context);const[statusOptions,setStatusOptions]=(0,react.useState)([]);const[userOptions,setUserOptions]=(0,react.useState)([]);// Search filter variables
const[status,setStatus]=(0,react.useState)([]);const[assignedTo,setAssignedTo]=(0,react.useState)([]);const[createdOnStart,setCreatedOnStart]=(0,react.useState)(null);const[createdOnEnd,setCreatedOnEnd]=(0,react.useState)(null);const[orderName,setOrderName]=(0,react.useState)([]);const[customerEmail,setCustomerEmail]=(0,react.useState)(null);const[descendingOrder,setDescendingOrder]=(0,react.useState)(true);const[sku,setSku]=(0,react.useState)([]);const[tags,setTags]=(0,react.useState)([]);(0,react.useEffect)(()=>{Promise.all([getUserList(),getWorkObjectStatusLookup()]).then(_ref2=>{let[userList,statusList]=_ref2;const formattedUserOptions=userList.map(user=>({value:user.id,label:"".concat(user.metadata.firstName," ").concat(user.metadata.lastName)}));setUserOptions(formattedUserOptions);// Set to signed in user
setAssignedTo([user.id]);const formattedStatusOptions=Object.entries(statusList).map(arr=>({value:arr[1],label:arr[0]}));setStatusOptions(formattedStatusOptions);});},[getUserList,getWorkObjectStatusLookup,user]);(0,react.useEffect)(()=>{},[descendingOrder]);//TODO find a better way to handle sorting....
const handleSortToggle=()=>{setDescendingOrder(prevState=>!prevState);//not the most ideal but it works doesnt work when you search
setTimeout(()=>{handleSearch();},100);};const handleSearch=()=>{// Build search filter and call parent component
const startDate=createdOnStart?createdOnStart+'T04:00:00.000Z':null;const endDate=createdOnEnd?createdOnEnd+'T03:59:59.999Z':null;const searchFilter={status:status,assignedTo:assignedTo,createdOnStart:startDate?startDate:null,createdOnEnd:endDate?moment_timezone_default()(endDate).add(1,'days'):null,tags:tags,order:{orderName:orderName,customerEmail:customerEmail,lineItemSkus:sku},descendingOrder:descendingOrder};// if (searchFilter.createdOnStart) {
//     searchFilter.createdOnStart = new Date(searchFilter.createdOnStart).toISOString();
// }
// if (searchFilter.createdOnEnd) {
//     const endOfDay = new Date(searchFilter.createdOnEnd);
//     endOfDay.setHours(23, 59, 59, 999);
//     searchFilter.createdOnEnd = endOfDay.toISOString();
// }
searchFilter.order.orderName=searchFilter.order.orderName.filter(o=>o!=='');searchFilter.customerEmail=searchFilter.customerEmail===''?null:searchFilter.customerEmail;onSearch(searchFilter);};const StatusOption=_ref3=>{let{innerProps,data}=_ref3;return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{...innerProps,className:"ms-2",children:/*#__PURE__*/(0,jsx_runtime.jsx)(StatusBadgeComponent,{status:data.value})});};// Inline function for rendering selected values with the StatusBadgeComponent
const CustomMultiValueLabel=props=>{return/*#__PURE__*/(0,jsx_runtime.jsx)(StatusBadgeComponent,{status:props.data.value});};// Custom components for react-select
const customComponents={Option:StatusOption,MultiValueLabel:CustomMultiValueLabel};const handleClear=()=>{// Reset all fields back to defaults
handleDeselectAll();setStatus([]);setSku([]);setTags([]);setAssignedTo([user.id]);setCreatedOnStart(null);setCreatedOnEnd(null);setOrderName([]);setCustomerEmail(null);handleSearch();};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Order #"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",placeholder:"#123456",value:orderName,onChange:e=>{const value=e.target.value;const updatedValue=value.includes('#')?value:"#".concat(value);setOrderName([updatedValue]);}})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Sku"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",placeholder:"QUO-3351231783",value:sku,onChange:e=>setSku([e.target.value])})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Tag"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",placeholder:"tag1",value:tags,onChange:e=>setTags([e.target.value])})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Customer Email"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"email",placeholder:"example@email.com",value:customerEmail||'',onChange:e=>setCustomerEmail(e.target.value)})]}),hasPermission('order:read')&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-3 mt-md-3 mt-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Status"}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{isMulti:true,options:statusOptions,components:customComponents,onChange:selectedOptions=>setStatus(selectedOptions.map(option=>option.value)),value:statusOptions.filter(option=>status.includes(option.value))})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-3  mt-md-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Assigned to"}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{isMulti:true,options:userOptions,onChange:e=>setAssignedTo(e.map(option=>option.value)),value:userOptions.filter(option=>assignedTo.includes(option.value))})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-3  mt-md-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Created On Start"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"date",value:createdOnStart||'',onChange:e=>setCreatedOnStart(e.target.value)})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-3  mt-md-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Created On End"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"date",value:createdOnEnd||'',onChange:e=>setCreatedOnEnd(e.target.value)})]})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{className:"mt-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Col/* default */.Z,{className:"text-start",children:selectedOrders&&selectedOrders.length>0&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex mb-n1",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"light",className:"ms-2",onClick:()=>setShowBulkAssignModal(true),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faListCheck */.jMV})," Bulk Assign",selectedOrders&&selectedOrders.length>0&&/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"badge bg-dark ms-2",children:selectedOrders.length})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"light",className:"ms-2",onClick:()=>setShowBulkDownloadModal(true),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faDownload */.q7m})," Bulk Download",selectedOrders&&selectedOrders.length>0&&/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"badge bg-dark ms-2",children:selectedOrders.length})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"light",className:"ms-2",onClick:handleDeselectAll,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faCancel */.jAm})," Deselect All"]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsxs)("small",{className:"text-muted rounded bg-light p-3 ms-2 mb-3 d-none d-md-inline",children:["*use ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"bg-dark text-white rounded-1 p-1 text-center ps-2 me-1",children:"SHIFT "})," + ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"bg-dark text-white rounded-1 p-1 text-center ps-2 me-1",children:" C "})," to copy order numbers to clipboard"]})]})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Col/* default */.Z,{className:"text-end",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"light",onClick:handleSortToggle,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:descendingOrder?free_solid_svg_icons/* faArrowDownWideShort */.MdH:free_solid_svg_icons/* faArrowUpWideShort */.J$0})," Sort"]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"light",className:"ms-2",onClick:handleClear,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faBan */.gPx})," Clear Search"]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"",className:"ms-2 btn-brand text-white",onClick:handleSearch,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faMagnifyingGlass */.Y$T})," Search"]})]})]})]});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Modal.js + 6 modules
var Modal = __webpack_require__(9233);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/ProgressBar.js
var ProgressBar = __webpack_require__(4380);
;// CONCATENATED MODULE: ./src/components/search/order.bulkassign.component.js
function OrderBulkAssignComponent(_ref){let{selectedOrders,showBulkAssignModal,setShowBulkAssignModal,handleDeselectAll}=_ref;const{orderService,distributionService,getUserById}=(0,react.useContext)(cache_context);const[selectedUser,setSelectedUser]=(0,react.useState)(null);const[selectedArtist,setSelectedArtist]=(0,react.useState)(null);const[selectedPrintFileDesigner,setSelectedPrintFileDesigner]=(0,react.useState)(null);const[userCapacities,setUserCapacities]=(0,react.useState)([]);const[users,setUsers]=(0,react.useState)([]);const[artists,setArtists]=(0,react.useState)([]);const[printFileDesigners,setPrintFileDesigners]=(0,react.useState)([]);const[totalFailed,setTotalFailed]=(0,react.useState)(0);const[totalSucceeded,setTotalSucceeded]=(0,react.useState)(0);const[orderType,setOrderType]=(0,react.useState)('artfile');const[isAssigning,setIsAssigning]=(0,react.useState)(false);const[orderStatus,setOrderStatus]=(0,react.useState)({});const[startTime,setStartTime]=(0,react.useState)(null);const[elapsedTime,setElapsedTime]=(0,react.useState)('');const[assigningOverStatus2,setAssigningOverStatus2]=(0,react.useState)(true);const[showNextStepMessage,setShowNextStepMessage]=(0,react.useState)(false);(0,react.useEffect)(()=>{distributionService.getUsersCapacity(orderType).then(capacityData=>{setUserCapacities(capacityData.data);});},[distributionService,orderType]);(0,react.useEffect)(()=>{if(userCapacities.length>0){const userPromises=userCapacities.map(uc=>getUserById(uc.userId));Promise.all(userPromises).then(allUsers=>{const options=allUsers.map((user,index)=>({value:userCapacities[index].userId,label:user}));setUsers(options);});}},[userCapacities,getUserById]);(0,react.useEffect)(()=>{distributionService.getUsersCapacity('artfile').then(capacityData=>{const artistPromises=capacityData.data.map(uc=>getUserById(uc.userId));Promise.all(artistPromises).then(allArtists=>{const options=allArtists.map((artist,index)=>({value:capacityData.data[index].userId,label:artist}));setArtists(options);});});distributionService.getUsersCapacity('printfile').then(capacityData=>{const designerPromises=capacityData.data.map(uc=>getUserById(uc.userId));Promise.all(designerPromises).then(allDesigners=>{const options=allDesigners.map((designer,index)=>({value:capacityData.data[index].userId,label:designer}));setPrintFileDesigners(options);});});},[distributionService,getUserById]);const handleCloseModal=()=>setShowBulkAssignModal(false);const handleTypeChange=value=>{setOrderType(value);setSelectedUser(null);};(0,react.useEffect)(()=>{let timer;if(isAssigning&&startTime){timer=setInterval(()=>{const now=new Date();const diffInSeconds=Math.floor((now-startTime)/1000);const minutes=Math.floor(diffInSeconds/60);const seconds=diffInSeconds%60;setElapsedTime("".concat(minutes?"".concat(minutes," minutes"):''," ").concat(seconds," seconds"));},1000);}else if(!isAssigning&&startTime){clearInterval(timer);}return()=>{if(timer){clearInterval(timer);}};},[isAssigning,startTime]);const handleBulkAssign=async()=>{if(selectedUser&&selectedOrders.length>0){setStartTime(new Date());setIsAssigning(true);setTotalFailed(0);setTotalSucceeded(0);const orderIdToNameMap={};selectedOrders.forEach(order=>{orderIdToNameMap[order.id]=order.orderName;});// Filter orders with status over 2
const ordersOverStatus2=selectedOrders.filter(order=>order.status>2);// Process orders with status over 2 using bulkAssign
const batchSize=25;for(let i=0;i<ordersOverStatus2.length;i+=batchSize){const batch=ordersOverStatus2.slice(i,i+batchSize).map(order=>order.id);try{const response=await orderService.bulkAssign(batch,selectedUser.value);const results=response.data.results;for(const[orderId,success]of Object.entries(results)){const orderName=orderIdToNameMap[orderId];setOrderStatus(prev=>({...prev,[orderName]:success?'success':"already assigned to ".concat(selectedUser.label)}));}setTotalSucceeded(prev=>prev+Object.values(results).filter(x=>x).length);setTotalFailed(prev=>prev+batch.length-Object.values(results).filter(x=>x).length);}catch(error){setTotalFailed(prev=>prev+batch.length);for(const orderId of batch){const orderName=orderIdToNameMap[orderId];setOrderStatus(prev=>({...prev,[orderName]:'failed'}));}}await new Promise(resolve=>setTimeout(resolve,0));}setIsAssigning(false);// Check if there are any orders with status 2 or less
const ordersStatus2OrLess=selectedOrders.filter(order=>order.status<=2);if(ordersStatus2OrLess.length>0){setShowNextStepMessage(true);}else{setAssigningOverStatus2(false);}}};const handleManualAssign=async()=>{if(selectedArtist&&selectedPrintFileDesigner&&selectedOrders.length>0){setStartTime(new Date());setIsAssigning(true);setTotalFailed(0);setTotalSucceeded(0);const orderIdToNameMap={};selectedOrders.forEach(order=>{orderIdToNameMap[order.id]=order.orderName;});// Filter orders with status 2 or less
const ordersStatus2OrLess=selectedOrders.filter(order=>order.status<=2);// Process orders with status 2 or less using manuallyAssign
for(const order of ordersStatus2OrLess){try{await orderService.manuallyAssign(order.workObjectId,selectedArtist.value,selectedPrintFileDesigner.value);setOrderStatus(prev=>({...prev,[order.orderName]:'success'}));setTotalSucceeded(prev=>prev+1);}catch(error){setOrderStatus(prev=>({...prev,[order.orderName]:'failed'}));setTotalFailed(prev=>prev+1);}await new Promise(resolve=>setTimeout(resolve,0));}setIsAssigning(false);setAssigningOverStatus2(false);}};const handleNextStep=()=>{setAssigningOverStatus2(false);setShowNextStepMessage(false);};const exportOrderList=()=>{const now=new Date();const formattedDate="".concat(now.getMonth()+1,"-").concat(now.getDate(),"-").concat(now.getFullYear(),"-").concat(now.getHours(),"-").concat(now.getMinutes(),"-bulk-assign-report.csv");const csvContent='data:text/csv;charset=utf-8,'+'Order Name,Order ID,Assigned To,Status,Timestamp\n'+selectedOrders.map(order=>"".concat(order.orderName,",").concat(order.id,",").concat(selectedUser.label,",").concat(orderStatus[order.orderName]||'pending',",").concat(new Date().toLocaleString())).join('\n');const encodedUri=encodeURI(csvContent);const link=document.createElement('a');link.setAttribute('href',encodedUri);link.setAttribute('download',formattedDate);link.click();};const progressOverStatus2=selectedOrders.length?(totalFailed+totalSucceeded)/selectedOrders.filter(order=>order.status>2).length*100:0;const progressStatus2OrLess=selectedOrders.length?(totalFailed+totalSucceeded)/selectedOrders.filter(order=>order.status<=2).length*100:0;return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:showBulkAssignModal,onHide:handleCloseModal,size:"xl",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Bulk Assign"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[isAssigning&&/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{}),assigningOverStatus2&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn-sm rounded-start rounded-0",variant:orderType==='artfile'?'dark':'light',onClick:()=>handleTypeChange('artfile'),children:"Art File"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn-sm rounded-end rounded-0",variant:orderType==='printfile'?'dark':'light',onClick:()=>handleTypeChange('printfile'),children:"Print File"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mt-2 mb-3",children:["You're Assigning ",/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-secondary",children:orderType}),/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-dark ms-2",children:["Total Orders Selected: ",selectedOrders.length]})," |",/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-danger ms-2",children:["Failed: ",totalFailed]})," |",/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-success ms-2",children:["Succeeded: ",totalSucceeded]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(ProgressBar/* default */.Z,{variant:"success",now:progressOverStatus2,label:"".concat(Math.round(progressOverStatus2),"%"),className:"mt-3"}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mt-2",children:elapsedTime&&"Elapsed Time: ".concat(elapsedTime)})]}),!assigningOverStatus2&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mt-2 mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-dark ms-2",children:["Total Orders Selected: ",selectedOrders.length]})," |",/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-danger ms-2",children:["Failed: ",totalFailed]})," |",/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-success ms-2",children:["Succeeded: ",totalSucceeded]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(ProgressBar/* default */.Z,{variant:"success",now:progressStatus2OrLess,label:"".concat(Math.round(progressStatus2OrLess),"%"),className:"mt-3"}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mt-2",children:elapsedTime&&"Elapsed Time: ".concat(elapsedTime)})]}),assigningOverStatus2?/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mb-3 mt-3 text-center",children:/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{options:users,value:selectedUser,onChange:setSelectedUser,placeholder:"Select User",className:"mb-3",styles:{// Fixes the overlapping problem of the component
menu:provided=>({...provided,zIndex:9999})}})}):/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mb-3 mt-3 text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{options:artists,value:selectedArtist,onChange:setSelectedArtist,placeholder:"Select Artist",className:"mb-3",styles:{// Fixes the overlapping problem of the component
menu:provided=>({...provided,zIndex:9999})}}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{options:printFileDesigners,value:selectedPrintFileDesigner,onChange:setSelectedPrintFileDesigner,placeholder:"Select Print File Designer",className:"mb-3",styles:{// Fixes the overlapping problem of the component
menu:provided=>({...provided,zIndex:9999})}})]}),selectedOrders.length>0&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"assigned-orders-list mt-2 text-center bg-light border border-secondary rounded pb-0 shadow-sm",style:{maxHeight:'400px',overflowY:'auto'},children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mt-3 mb-0",children:"Orders to be assigned:"}),/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{}),selectedOrders.map(order=>{var _orderStatus$order$or;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[order.orderName," -",/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"ms-1 ".concat(orderStatus[order.orderName]==='success'?'bg-success':(_orderStatus$order$or=orderStatus[order.orderName])!==null&&_orderStatus$order$or!==void 0&&_orderStatus$order$or.startsWith('already assigned')?'bg-warning':'bg-danger'),children:orderStatus[order.orderName]||'pending'})]},order.id);}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"sticky-bottom text-center mt-3 mb-0 w-100",children:totalSucceeded+totalFailed===selectedOrders.length?/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",className:"shadow-sm w-100 rounded-0",onClick:exportOrderList,children:"Export List"}):showNextStepMessage?/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"primary",className:"shadow-sm w-100 rounded-0",onClick:handleNextStep,children:"Next Step"}):/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",className:"shadow-sm w-100 rounded-0",onClick:assigningOverStatus2?handleBulkAssign:handleManualAssign,disabled:isAssigning,children:isAssigning?/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{variant:"light"})}):'Confirm and Assign'})})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Footer,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:handleCloseModal,children:"Close"})})]})});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Alert.js
var Alert = __webpack_require__(5975);
;// CONCATENATED MODULE: ./src/components/search/order.bulkdownload.component.js
function OrderBulkDownloadComponent(_ref){let{selectedWorkObjectIds,showBulkDownloadModal,setShowBulkDownloadModal,handleDeselectAll}=_ref;const{downloadService}=(0,react.useContext)(cache_context);const[selectedImageTypes,setSelectedImageTypes]=(0,react.useState)([]);const[isCreatingDownloadJob,setIsCreatingDownloadJob]=(0,react.useState)(false);const[alertMessage,setAlertMessage]=(0,react.useState)(null);const[alertVariant,setAlertVariant]=(0,react.useState)('success');const imageTypeOptions=[{value:'cx',label:'CX'},{value:'artfile',label:'Artfile'},{value:'printfile',label:'Printfile'}];const handleImageTypeChange=selectedOptions=>{setSelectedImageTypes(selectedOptions);};const handleCreateDownloadJob=async()=>{if(selectedWorkObjectIds.length>0&&selectedImageTypes.length>0){setIsCreatingDownloadJob(true);try{await downloadService.bulkDownload(selectedImageTypes.map(type=>type.value),selectedWorkObjectIds);setAlertMessage('Download job created successfully. You will receive an email with the download link in a few minutes.');setAlertVariant('success');handleDeselectAll();}catch(error){setAlertMessage("Error creating download job: ".concat(error.message));setAlertVariant('danger');}finally{setIsCreatingDownloadJob(false);}}};const handleCloseModal=()=>{setShowBulkDownloadModal(false);setIsCreatingDownloadJob(false);setAlertMessage(null);};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:showBulkDownloadModal,onHide:handleCloseModal,size:"lg",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{className:"h4",children:"Bulk Download"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[isCreatingDownloadJob&&/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{}),alertMessage&&/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z,{variant:alertVariant,children:alertMessage}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mb-3",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("h5",{children:["Selected Orders:",/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-dark ms-2 pt-1 pb-1",children:[selectedWorkObjectIds.length," Orders Selected"]})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mb-3",children:/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{isMulti:true,options:imageTypeOptions,value:selectedImageTypes,onChange:handleImageTypeChange,placeholder:"Select Image Types"})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-end",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",className:"btn btn-dark",onClick:handleCreateDownloadJob,disabled:isCreatingDownloadJob||selectedWorkObjectIds.length===0||selectedImageTypes.length===0,children:isCreatingDownloadJob?'Processing Download...':'Download'})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Footer,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:handleCloseModal,children:"Close"})})]});}
;// CONCATENATED MODULE: ./src/components/search/search.component.js
function SearchComponent(){const{user}=(0,react.useContext)(auth_context);const{config}=(0,react.useContext)(config_context);const[isError,setIsError]=(0,react.useState)(false);const[error,setError]=(0,react.useState)(null);const[page,setPage]=(0,react.useState)(1);const[pageSize,setPageSize]=(0,react.useState)(10);const[results,setResults]=(0,react.useState)(null);const[searchFilter,setSearchFilter]=(0,react.useState)(()=>{const saved=sessionStorage.getItem('searchFilter');return saved?JSON.parse(saved):{};});const[isLoading,setIsLoading]=(0,react.useState)(false);const[currentOrderId,setcurrentOrderId]=(0,react.useState)(null);const{orderService}=(0,react.useContext)(cache_context);const[showPopOver,setShowPopOver]=(0,react.useState)(false);const[popoverTarget,setPopoverTarget]=(0,react.useState)(null);const[selectedOrders,setSelectedOrders]=(0,react.useState)([]);const[selectedOrderNames,setSelectedOrderNames]=(0,react.useState)([]);const[selectedWorkObjectIds,setSelectedWorkObjectIds]=(0,react.useState)([]);const lastCheckedIndexRef=(0,react.useRef)(null);const shiftKeyPressedRef=(0,react.useRef)(false);const[showBulkAssignModal,setShowBulkAssignModal]=(0,react.useState)(false);const[showBulkDownloadModal,setShowBulkDownloadModal]=(0,react.useState)(false);(0,react.useEffect)(()=>{orderService.getAssignedOrders(user.id,page,pageSize,searchFilter).then(res=>{setResults(res.data);setIsLoading(false);setError(null);},err=>{setIsError(true);setError(err.message);}).finally(()=>{setIsLoading(false);});},[page,searchFilter,user.id,pageSize,config,orderService]);(0,react.useEffect)(()=>{// Persist searchFilter to sessionStorage whenever it changes
sessionStorage.setItem('searchFilter',JSON.stringify(searchFilter));},[searchFilter]);const handleCheckboxChange=(event,isChecked,shopifyOrderId,orderName,workObjectId,status,index)=>{if(shiftKeyPressedRef.current&&lastCheckedIndexRef.current!==null){// Determine the range of checkboxes between the first and last clicked
const start=Math.min(lastCheckedIndexRef.current,index);const end=Math.max(lastCheckedIndexRef.current,index);// Extract the order IDs, names, and statuses within the selected range
const ordersToToggle=results.results.slice(start,end+1).map(order=>({id:order.shopifyOrderId,orderName:order.orderName,workObjectId:order.id,status:order.status}));let newSelectedOrders;// If the checkbox is being checked, add the new IDs and statuses to the existing list
if(isChecked){// Combine the existing selected orders with the new range of orders
newSelectedOrders=[...selectedOrders,...ordersToToggle.filter(order=>!selectedOrders.some(selectedOrder=>selectedOrder.id===order.id))];}else{// Otherwise, remove the IDs and statuses from the existing list
newSelectedOrders=selectedOrders.filter(order=>!ordersToToggle.some(toggleOrder=>toggleOrder.id===order.id));}// Update state with the new lists
setSelectedOrders(newSelectedOrders);}else{// No Shift key, handle a single checkbox click
if(isChecked){// Checkbox is checked: add the ID and status to the list
setSelectedOrders(prevOrders=>[...prevOrders,{id:shopifyOrderId,workObjectId,orderName,status}]);}else{// Checkbox is unchecked: remove the ID and status from the list
setSelectedOrders(prevOrders=>prevOrders.filter(order=>order.id!==shopifyOrderId));}}// Update the index of the last clicked checkbox
lastCheckedIndexRef.current=index;};(0,react.useEffect)(()=>{setSelectedWorkObjectIds(selectedOrders.map(order=>order.workObjectId));},[selectedOrders]);(0,react.useEffect)(()=>{const handleKeyDown=e=>{if(e.key==='Shift'){shiftKeyPressedRef.current=true;}};const handleKeyUp=e=>{if(e.key==='Shift'){shiftKeyPressedRef.current=false;}};window.addEventListener('keydown',handleKeyDown);window.addEventListener('keyup',handleKeyUp);return()=>{window.removeEventListener('keydown',handleKeyDown);window.removeEventListener('keyup',handleKeyUp);};},[]);(0,react.useEffect)(()=>{const handleKeyPress=e=>{if(e.shiftKey&&e.code==='KeyC'){// Copy selectedOrderNames to clipboard as a list
const orderNamesList=selectedOrderNames.join('\n');// Joining as a list with newline
copyToClipboard(orderNamesList);// Then copy text to clipboard
}};window.addEventListener('keydown',handleKeyPress);return()=>{window.removeEventListener('keydown',handleKeyPress);};},[selectedOrderNames,isError]);const handleSearch=params=>{setIsError(false);setIsLoading(true);setSearchFilter(params);setPage(1);};const handlePageChange=page=>{setPage(page);};const handleOpenPopOver=(event,orderID)=>{setcurrentOrderId(orderID);setPopoverTarget(event.target);setShowPopOver(true);};const handleClosePopOver=()=>{setShowPopOver(false);};const handleDeselectAll=()=>{setSelectedOrders([]);setSelectedOrderNames([]);setSelectedWorkObjectIds([]);};return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(OrderFilterComponent,{onSearch:handleSearch,selectedOrders:selectedOrders,selectedWorkObjectIds:selectedWorkObjectIds,showBulkAssignModal:showBulkAssignModal,setShowBulkAssignModal:setShowBulkAssignModal,showBulkDownloadModal:showBulkDownloadModal,setShowBulkDownloadModal:setShowBulkDownloadModal,handleDeselectAll:handleDeselectAll}),/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{}),isLoading&&!isError?/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{message:"Searching..."}):isError?/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"alert alert-danger",role:"alert",children:error}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(OrderTableComponent,{results:results,selectedOrders:selectedOrders,selectedOrderNames:selectedOrderNames,onPopOverOpen:handleOpenPopOver,onCheckboxChange:handleCheckboxChange}),/*#__PURE__*/(0,jsx_runtime.jsx)(PaginationComponent,{page:page,pageSize:pageSize,setPageSize:setPageSize,totalItems:results===null||results===void 0?void 0:results.totalItems,setPage:page=>handlePageChange(page)})]}),currentOrderId&&/*#__PURE__*/(0,jsx_runtime.jsx)(OrderPopoverComponent,{show:showPopOver,target:popoverTarget,orderId:currentOrderId,onClose:handleClosePopOver}),/*#__PURE__*/(0,jsx_runtime.jsx)(OrderBulkAssignComponent,{selectedOrders:selectedOrders,selectedOrderNames:selectedOrderNames,setShowBulkAssignModal:setShowBulkAssignModal,showBulkAssignModal:showBulkAssignModal,handleDeselectAll:handleDeselectAll}),/*#__PURE__*/(0,jsx_runtime.jsx)(OrderBulkDownloadComponent,{selectedWorkObjectIds:selectedWorkObjectIds,showBulkDownloadModal:showBulkDownloadModal,setShowBulkDownloadModal:setShowBulkDownloadModal,handleDeselectAll:handleDeselectAll})]});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Tabs.js
var Tabs = __webpack_require__(6664);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Tab.js + 1 modules
var Tab = __webpack_require__(4906);
;// CONCATENATED MODULE: ./src/components/workobject/showreturn.modal.component.js
function ShowReturnModalComponent(_ref){let{show,onHide,workObject,fetchWorkObject,setAlert,setShowReturnModal,orderService}=_ref;const[status,setStatus]=(0,react.useState)('');const[comment,setComment]=(0,react.useState)('');const[removeImage,setRemoveImage]=(0,react.useState)(false);const submitReturnOrder=()=>{orderService.returnOrder(workObject.workObject.id,parseInt(status),comment,removeImage).then(res=>{setAlert({show:true,message:'Order returned successfully',variant:'success'});setShowReturnModal(false);fetchWorkObject();}).catch(err=>{setAlert({show:true,message:'Failed to return order',variant:'danger'});});};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:show,onHide:onHide,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Return Order"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Body,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Return To"}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Select,{"aria-label":"Status select",onChange:e=>setStatus(e.target.value),children:[/*#__PURE__*/(0,jsx_runtime.jsx)("option",{children:"Select"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:"3",children:"ArtFile Designer"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:"4",children:"PrintFile Designer"})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Comment"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{as:"textarea",rows:3,value:comment,onChange:e=>setComment(e.target.value)})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Group,{className:"mb-3",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Check,{variant:"dark",type:"switch",id:"remove-image-switch",label:"Remove Image",onChange:e=>setRemoveImage(e.target.checked)})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-end",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",onClick:submitReturnOrder,disabled:!status||!comment,children:"Submit Return"})})]})})]});};
;// CONCATENATED MODULE: ./src/components/workobject/showassign.modal.component.js
function ShowAssignModalComponent(_ref){let{show,onHide,orderService,workObject,fetchWorkObject,setAlert,setShowAssignModal}=_ref;const[users,setUsers]=(0,react.useState)([]);const[selectedUser,setSelectedUser]=(0,react.useState)(null);const{distributionService,getUserById}=(0,react.useContext)(cache_context);const[orderType,setOrderType]=(0,react.useState)('artfile');const loadUsers=(0,react.useCallback)(()=>{distributionService.getUsersCapacity(orderType).then(capacityData=>{const options=[];const processUser=index=>{if(index>=capacityData.data.length){setUsers(options);return;}const userId=capacityData.data[index].userId;getUserById(userId).then(user=>{options.push({value:userId,label:user});processUser(index+1);}).catch(error=>{console.error('Error processing user:',error);processUser(index+1);});};processUser(0);}).catch(error=>console.error('Error fetching users:',error));},[distributionService,getUserById,orderType]);(0,react.useEffect)(()=>{loadUsers();},[loadUsers]);const assignOrder=()=>{orderService.bulkAssign([workObject.workObject.shopifyOrderId],selectedUser.value).then(res=>{setAlert({show:true,message:'Order assigned successfully',variant:'success'});setShowAssignModal(false);fetchWorkObject();}).catch(err=>{setAlert({show:true,message:'Failed to assign order',variant:'danger'});});};const handleOrderTypeChange=type=>{setOrderType(type);};return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:users&&/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:show,onHide:onHide,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Assign Order"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn-sm rounded-start rounded-0",variant:orderType==='artfile'?'dark':'light',onClick:()=>handleOrderTypeChange('artfile'),children:"Art File"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn-sm rounded-end rounded-0",variant:orderType==='printfile'?'dark':'light',onClick:()=>handleOrderTypeChange('printfile'),children:"Print File"})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z,{className:"mt-3",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Assign To"}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{options:users,value:selectedUser,onChange:setSelectedUser,placeholder:"Select User"})]})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Footer,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:onHide,children:"Close"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",onClick:assignOrder,children:"Assign Order"})]})]})});};
;// CONCATENATED MODULE: ./src/components/workobject/manuallyassign.modal.js
function ManuallyAssignModalComponent(_ref){let{show,onHide,orderService,workObject,fetchWorkObject,setAlert,setShowManuallyAssignModal}=_ref;const[artists,setArtists]=(0,react.useState)([]);const[printFileDesigners,setPrintFileDesigners]=(0,react.useState)([]);const[selectedArtist,setSelectedArtist]=(0,react.useState)(null);const[selectedPrintFileDesigner,setSelectedPrintFileDesigner]=(0,react.useState)(null);const{distributionService,getUserById}=(0,react.useContext)(cache_context);const loadUsers=(0,react.useCallback)(()=>{const fetchUsers=(userType,setUsers)=>{distributionService.getUsersCapacity(userType).then(capacityData=>{const options=[];const processUser=index=>{if(index>=capacityData.data.length){setUsers(options);return;}const userId=capacityData.data[index].userId;getUserById(userId).then(user=>{options.push({value:userId,label:user});processUser(index+1);}).catch(error=>{console.error('Error processing user:',error);processUser(index+1);});};processUser(0);}).catch(error=>console.error("Error fetching ".concat(userType," users:"),error));};fetchUsers('artfile',setArtists);fetchUsers('printfile',setPrintFileDesigners);},[distributionService,getUserById]);(0,react.useEffect)(()=>{loadUsers();},[loadUsers]);const handleArtistChange=selectedOption=>{setSelectedArtist(selectedOption);console.log('Selected Artist:',selectedOption);};const handlePrintFileDesignerChange=selectedOption=>{setSelectedPrintFileDesigner(selectedOption);console.log('Selected Print File Designer:',selectedOption);};const assignOrder=()=>{if(selectedArtist&&selectedPrintFileDesigner){orderService.manuallyAssign(workObject.workObject.id,selectedArtist.value,selectedPrintFileDesigner.value).then(res=>{setAlert({show:true,message:'Order assigned successfully',variant:'success'});setShowManuallyAssignModal(false);fetchWorkObject();}).catch(err=>{console.error('Error assigning order:',err);setAlert({show:true,message:'Failed to assign order',variant:'danger'});});}else{setAlert({show:true,message:'Please select both an artist and a print file designer',variant:'warning'});}};return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:show,onHide:onHide,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Assign Order"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z,{className:"mt-3",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Assign Artist"}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{options:artists,value:selectedArtist,onChange:handleArtistChange,placeholder:"Select Artist"})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Assign Print File Designer"}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{options:printFileDesigners,value:selectedPrintFileDesigner,onChange:handlePrintFileDesignerChange,placeholder:"Select Print File Designer"})]})]}),selectedArtist&&selectedPrintFileDesigner&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mt-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Order will be assigned to:"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{children:["Artist: ",/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:selectedArtist.label})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{children:["Print File Designer: ",/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:selectedPrintFileDesigner.label})]})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Footer,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:onHide,children:"Close"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",onClick:assignOrder,disabled:!selectedArtist||!selectedPrintFileDesigner,children:"Assign Order"})]})]})});};
;// CONCATENATED MODULE: ./src/components/workobject/showcancel.modal.component.js
function ShowCancelModalComponent(_ref){let{show,onHide,orderService,workObject,fetchWorkObject,setAlert,setShowCancelModal}=_ref;const submitCancelOrder=()=>{orderService.cancelOrder(workObject.workObject.id).then(res=>{setAlert({show:true,message:'Order cancelled successfully',variant:'success'});setShowCancelModal(false);fetchWorkObject();}).catch(err=>{setAlert({show:true,message:'Failed to cancel order',variant:'danger'});});};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:show,onHide:onHide,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Cancel Order"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{children:"Are you sure you want to cancel this order?"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-end",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",onClick:submitCancelOrder,children:"Yes"})})})]})]});};
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/InputGroup.js + 1 modules
var InputGroup = __webpack_require__(9970);
;// CONCATENATED MODULE: ./src/components/workobject/showtags.modal.component.js
function ShowTagsModalComponent(_ref){var _workObject$workObjec,_workObject$workObjec2;let{show,onHide,workObject,fetchWorkObject,setAlert,setShowTagsModal}=_ref;const[tag,setTag]=(0,react.useState)("");const{orderService}=(0,react.useContext)(cache_context);const handleAddTag=()=>{orderService.addTag(workObject.workObject.id,tag).then(res=>{setAlert({show:true,message:"Tag ".concat(tag," succesfully added "),variant:'success'});fetchWorkObject();}).catch(err=>{setAlert({show:true,message:'Failed to add tag',variant:'danger'});}).finally(()=>{setShowTagsModal(false);});};const handleDeleteTag=tag=>{orderService.deleteTag(workObject.workObject.id,tag).then(res=>{setAlert({show:true,message:"Tag ".concat(tag," succesfully deleted "),variant:'success'});fetchWorkObject();}).catch(err=>{setAlert({show:true,message:'Failed to delete tag',variant:'danger'});}).finally(()=>{setShowTagsModal(false);});};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:show,onHide:onHide,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Edit Tags"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(InputGroup/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",placeholder:"Enter tag",value:tag,onChange:e=>setTag(e.target.value)})})}),((_workObject$workObjec=workObject.workObject)===null||_workObject$workObjec===void 0?void 0:(_workObject$workObjec2=_workObject$workObjec.tags)===null||_workObject$workObjec2===void 0?void 0:_workObject$workObjec2.length)>0?/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mt-3 rounded p-2 border border-light",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mt-3 text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h5",{className:"mb-0",children:"Current Tags"}),/*#__PURE__*/(0,jsx_runtime.jsx)("small",{className:"text-muted",children:"Click to delete a tag"})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mt-3",children:workObject.workObject.tags.map(tag=>/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"danger btn-sm",className:"me-2",onClick:()=>handleDeleteTag(tag),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faTrash */.$aW,className:"me-1"})," ",tag]}))})]}):/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mt-3 text-center",children:/*#__PURE__*/(0,jsx_runtime.jsx)("h5",{className:"mb-0",children:"No Tags"})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Footer,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:onHide,children:"Close"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",onClick:handleAddTag,children:"Add Tag"})]})]});};
;// CONCATENATED MODULE: ./src/components/workobject/workobject.nav.component.js
function WorkObjectNav(_ref){var _user$email,_workObject$workObjec3,_workObject$workObjec4,_workObject$workObjec5;let{workObject,orderService,fetchWorkObject,hasPermission,user}=_ref;const{config}=(0,react.useContext)(config_context);const[orderName,setOrderName]=(0,react.useState)('');const[showModal,setShowReturnModal]=(0,react.useState)(false);const[showCancelModal,setShowCancelModal]=(0,react.useState)(false);const[showAssignModal,setShowAssignModal]=(0,react.useState)(false);const[showManuallyAssignModal,setShowManuallyAssignModal]=(0,react.useState)(false);const[showTagsModal,setShowTagsModal]=(0,react.useState)(false);const[alert,setAlert]=(0,react.useState)({show:false,message:'',variant:''});const isManager=hasPermission('user:write');(0,react.useEffect)(()=>{var _workObject$workObjec;if(workObject!==null&&workObject!==void 0&&(_workObject$workObjec=workObject.workObject)!==null&&_workObject$workObjec!==void 0&&_workObject$workObjec.metadata){setOrderName(workObject.workObject.metadata.orderName);}else{setOrderName('No order name');}},[workObject]);(0,react.useEffect)(()=>{if(alert.show){const timer=setTimeout(()=>{setAlert({show:false,message:'',variant:''});},3000);return()=>clearTimeout(timer);}},[alert]);const handleReturn=()=>{setShowReturnModal(true);};const handleCancel=()=>{setShowCancelModal(true);};const handleAssign=()=>{if(workObject.workObject.status<=2){setShowManuallyAssignModal(true);}else{setShowAssignModal(true);}};const handleTags=()=>{setShowTagsModal(true);};const renderTooltip=(props,text)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"button-tooltip",...props,children:text});const handleForceTransition=workObjectId=>{orderService.forceTransition(workObjectId).then(()=>{setAlert({show:true,message:'Successfully transitioned to next status',variant:'success'});fetchWorkObject();}).catch(()=>{setAlert({show:true,message:'Failed to transition to next status',variant:'danger'});});};return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"bg-brand text-white p-2 mb-3 rounded border-primary border",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-items-center mb-0 me-auto",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h3",{className:"mb-0",children:orderName||'Not Available'}),user!==null&&user!==void 0&&(_user$email=user.email)!==null&&_user$email!==void 0&&_user$email.includes('ecomgraduates.com')?/*#__PURE__*/(0,jsx_runtime.jsxs)("h4",{className:"mb-0 ms-2",children:[" workObjectID: #",workObject.workObject.id]}):null]}),isManager&&(workObject.workObject.status===9003||workObject.workObject.status===3||workObject.workObject.status===4)&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>{var _workObject$workObjec2;return renderTooltip(props,"Force transition to status ".concat((workObject===null||workObject===void 0?void 0:(_workObject$workObjec2=workObject.workObject)===null||_workObject$workObjec2===void 0?void 0:_workObject$workObjec2.status)===9003?'Pending Assignment':'Pending Printfile'));},children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"primary",size:"md",className:"mx-2 bg-transparent text-white border-0",onClick:()=>handleForceTransition(workObject.workObject.id),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faForward */.irl})})}),isManager&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'Manage Tags'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"primary",size:"md",className:"mx-2 bg-transparent text-white border-0",onClick:handleTags,children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faTags */.tho})})}),(workObject===null||workObject===void 0?void 0:(_workObject$workObjec3=workObject.workObject)===null||_workObject$workObjec3===void 0?void 0:_workObject$workObjec3.status)!==8000&&isManager&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'Assign Order'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"primary",size:"md",className:"mx-2 bg-transparent text-white border-0",onClick:handleAssign,children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faUsers */.FVb})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'Return Order to Previous Status'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"primary",size:"md",className:"mx-2 bg-transparent text-white border-0",onClick:handleReturn,children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faRotateLeft */.XnX})})}),(workObject===null||workObject===void 0?void 0:(_workObject$workObjec4=workObject.workObject)===null||_workObject$workObjec4===void 0?void 0:_workObject$workObjec4.status)!==8000&&isManager&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'Cancel Order'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"primary",size:"md",className:"mx-2 bg-transparent text-white border-0",onClick:handleCancel,children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faCancel */.jAm})})}),(workObject===null||workObject===void 0?void 0:(_workObject$workObjec5=workObject.workObject)===null||_workObject$workObjec5===void 0?void 0:_workObject$workObjec5.status)!==8000&&isManager&&/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'View in Shopify'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"primary",size:"md",href:"".concat(config.shopifyUrl,"/admin/orders/").concat(workObject.workObject.shopifyOrderId),rel:"noopener noreferrer",target:"_blank",className:"mx-2 bg-transparent text-white border-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_brands_svg_icons/* faShopify */.yvx})})})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{}),alert.show&&/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z,{dismissible:true,variant:alert.variant,children:alert.message}),/*#__PURE__*/(0,jsx_runtime.jsx)(ShowReturnModalComponent,{show:showModal,onHide:()=>setShowReturnModal(false),workObject:workObject,fetchWorkObject:fetchWorkObject,setShowReturnModal:setShowReturnModal,setAlert:setAlert,orderService:orderService}),/*#__PURE__*/(0,jsx_runtime.jsx)(ShowAssignModalComponent,{show:showAssignModal,onHide:()=>setShowAssignModal(false),orderService:orderService,workObject:workObject,fetchWorkObject:fetchWorkObject,setShowAssignModal:setShowAssignModal,setAlert:setAlert}),/*#__PURE__*/(0,jsx_runtime.jsx)(ManuallyAssignModalComponent,{show:showManuallyAssignModal,onHide:()=>setShowManuallyAssignModal(false),orderService:orderService,workObject:workObject,fetchWorkObject:fetchWorkObject,setAlert:setAlert,setShowManuallyAssignModal:setShowManuallyAssignModal}),/*#__PURE__*/(0,jsx_runtime.jsx)(ShowCancelModalComponent,{show:showCancelModal,onHide:()=>setShowCancelModal(false),orderService:orderService,workObject:workObject,setShowCancelModal:setShowCancelModal,setAlert:setAlert,fetchWorkObject:fetchWorkObject}),/*#__PURE__*/(0,jsx_runtime.jsx)(ShowTagsModalComponent,{show:showTagsModal,onHide:()=>setShowTagsModal(false),orderService:orderService,workObject:workObject,setShowTagsModal:setShowTagsModal,setAlert:setAlert,fetchWorkObject:fetchWorkObject})]});}
;// CONCATENATED MODULE: ./src/components/workobject/subwayline.component.js
function StatusProgressBarComponent(_ref){let{workObject}=_ref;const{config}=(0,react.useContext)(config_context);const{getUserList}=(0,react.useContext)(cache_context);const transitions=workObject.transitions||[];const currentStatus=workObject.status;const[userList,setUserList]=(0,react.useState)([]);let marginClass;(0,react.useEffect)(()=>{getUserList().then(data=>{setUserList(data);});},[workObject,getUserList]);const normalSteps=Array.from({length:8},(_,i)=>i);const isErrorStatus=currentStatus<0||currentStatus>=8000;const lastSuccessfulStatus=transitions.length?transitions[transitions.length-1].sourceStatus:null;const stepsToShow=isErrorStatus?normalSteps.slice(0,lastSuccessfulStatus+1):normalSteps;const stepClass=isErrorStatus?'subway-line-progress-bar-item-error':'subway-line-progress-bar-item';const getTooltipText=(status,timestamp,sourceUser,destinationUser)=>{var _config$statusMap$sta;const actionText=((_config$statusMap$sta=config.statusMap[status.toString()])===null||_config$statusMap$sta===void 0?void 0:_config$statusMap$sta.text)||'Unknown Status';const timeText=timestamp?"on ".concat(new Date(timestamp).toLocaleString()):'';const userText=destinationUser?"Transitioned to ".concat(destinationUser):'';const sourceUserText=sourceUser?"by ".concat(sourceUser):'';return"".concat(actionText," ").concat(userText," ").concat(sourceUserText," ").concat(timeText);};const getAssignedUser=userId=>{const assignedUser=userList.find(user=>user.id===userId);if(assignedUser!==undefined){if(assignedUser.metadata.firstName===undefined||assignedUser.metadata.lastName===undefined){return assignedUser.metadata.email;}else{return"".concat(assignedUser.metadata.firstName," ").concat(assignedUser.metadata.lastName);}}else{return userId;}};return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(ProgressBar/* default */.Z,{className:"mb-3 subway-line-progress-bar",children:[stepsToShow.map((step,index)=>{let className;let icon;// Find transition data for tooltip
const transitionData=step===0?transitions.find(t=>t.sourceStatus===step):transitions.find(t=>t.destinationStatus===step);const tooltipText=transitionData!==null&&transitionData!==undefined?getTooltipText(step,transitionData.timestamp,getAssignedUser(transitionData.sourceUser),getAssignedUser(transitionData.destinationUser)):'Not yet reached';// Check if the step was ever reached
const wasStepReached=transitions.some(t=>t.destinationStatus===step);// Step is current if it matches the current status and it was reached
const isCurrentStep=step===currentStatus&&wasStepReached;// Step is past if its status is less than the current status and it was reached
const isPastStep=step<currentStatus&&wasStepReached;// Step is future if its status is greater than the current status
const isFutureStep=step>currentStatus;// Assign class and icon based on step status
if(isCurrentStep){className=isErrorStatus?'bg-warning':'bg-light-green';icon=free_solid_svg_icons/* faFlag */.RrC;marginClass='ms-2';}else if(isPastStep||step===0){className='bg-current-step';icon=free_solid_svg_icons/* faCheckCircle */.f8k;marginClass='ms-2';}else if(isFutureStep){className='bg-secondary';icon=null;marginClass=null;}else{className='bg-secondary';icon=free_solid_svg_icons/* faTimesCircle */.nYk;marginClass='ms-2';}return/*#__PURE__*/(0,jsx_runtime.jsx)(ProgressBar/* default */.Z,{now:1/stepsToShow.length*100,className:"".concat(className," border-end subway-line-progress-bar ").concat(stepClass),label:/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"tooltip-".concat(step),children:tooltipText}),children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{display:'flex',alignItems:'center',justifyContent:'center'},className:marginClass,children:[icon&&/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:icon,className:"subway-line-icon"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"".concat(className," subway-line-badge bg-transparent"),children:config.statusMap[step.toString()].text})]})},step)})},index);}),isErrorStatus&&/*#__PURE__*/(0,jsx_runtime.jsx)(ProgressBar/* default */.Z,{now:1/stepsToShow.length*100,className:"bg-danger subway-line-progress-bar ".concat(stepClass),label:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{display:'flex',alignItems:'center',justifyContent:'center'},className:marginClass,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faTimesCircle */.nYk,className:"subway-line-icon"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-danger subway-line-badge bg-transparent",children:config.statusMap[currentStatus.toString()].text})]})})]})});}
;// CONCATENATED MODULE: ./src/utils/timeSince.js
function timeSince(dateString){const inputDate=new Date(dateString);const currentDate=new Date();const timeDeltaMs=currentDate-inputDate;const seconds=timeDeltaMs/1000;const minutes=seconds/60;const hours=minutes/60;const days=hours/24;const weeks=days/7;if(weeks>=1){return"".concat(Math.floor(weeks)," weeks ago");}else if(days>=1){return"".concat(Math.floor(days)," days ago");}else if(hours>=1){return"".concat(Math.floor(hours)," hours ago");}else if(minutes>=1){return"".concat(Math.floor(minutes)," minutes ago");}else{return"Just now";}}
;// CONCATENATED MODULE: ./src/components/workobject/workobject.details.component.js
function WorkObjectDetails(_ref){let{workObject}=_ref;const{getUserById}=(0,react.useContext)(cache_context);const[assignedTo,setAssignedTo]=(0,react.useState)(null);const[previouslyAssignedTo,setPreviouslyAssignedTo]=(0,react.useState)(null);const[designatedDesigner,setDesignatedDesigner]=(0,react.useState)(null);(0,react.useEffect)(()=>{Promise.all([getUserById(workObject.assignedTo),getUserById(workObject.assignedToPrevious),getUserById(workObject.designatedPrintFileDesigner)]).then(res=>{setAssignedTo(res[0]);setPreviouslyAssignedTo(res[1]);setDesignatedDesigner(res[2]);});},[workObject,getUserById]);return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(WorkObjectDetail,{icon:free_solid_svg_icons/* faClock */.SZw,name:"Created On",value:new Date(workObject.workObjectCreatedOn).toLocaleString(),muted:timeSince(workObject.workObjectCreatedOn)}),/*#__PURE__*/(0,jsx_runtime.jsx)(WorkObjectDetail,{icon:free_solid_svg_icons/* faUser */.ILF,name:"Assigned To",value:assignedTo}),/*#__PURE__*/(0,jsx_runtime.jsx)(WorkObjectDetail,{icon:free_solid_svg_icons/* faUserClock */.hnx,name:"Assigned On",value:new Date(workObject.assignedOn).toLocaleString(),muted:timeSince(workObject.assignedOn)}),/*#__PURE__*/(0,jsx_runtime.jsx)(WorkObjectDetail,{icon:free_solid_svg_icons/* faUser */.ILF,name:"Previously Assigned",value:previouslyAssignedTo}),/*#__PURE__*/(0,jsx_runtime.jsx)(WorkObjectDetail,{icon:free_solid_svg_icons/* faUser */.ILF,name:"Print File Designer",value:designatedDesigner})]})});}function WorkObjectDetail(_ref2){let{icon,name,value,muted}=_ref2;return/*#__PURE__*/(0,jsx_runtime.jsxs)(Col/* default */.Z,{className:"text-center p-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:icon,size:"2x"})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:name}),/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),value,muted!==undefined&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"text-muted",children:muted})]})]});};
;// CONCATENATED MODULE: ./src/components/workobject/sku.popover.component.js
// Import useNavigate and useLocation from react-router-dom
const renderSkuData=skuData=>{if(!skuData){return/*#__PURE__*/(0,jsx_runtime.jsx)(ListGroup/* default */.Z.Item,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-center text-muted",children:"SKU details not found"})});}return/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{className:"mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"fw-bold",children:"SKU: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-brand mb-1 rounded-pill",children:skuData.variantSku})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"fw-bold",children:"Option 1: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-brand mb-1 rounded-pill",children:skuData.option1})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"fw-bold",children:"Option 2: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-brand mb-1 rounded-pill",children:skuData.option2})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"fw-bold",children:"Option 3: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-brand mb-1 rounded-pill",children:skuData.option3})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"fw-bold",children:"Shipping Method: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-brand mb-1 rounded-pill",children:skuData.shippingMethod})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"fw-bold",children:"Sensaria Product ID: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-brand mb-1 rounded-pill",children:skuData.sensariaProductId})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"fw-bold",children:"Artfile Required: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-brand mb-1 rounded-pill",children:skuData.artfileNeeded?'Yes':'No'})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"fw-bold",children:"CX Images: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-brand mb-1 rounded-pill",children:skuData.numberOfCxImages})," ",/*#__PURE__*/(0,jsx_runtime.jsx)("br",{})]});};function SkuPopoverComponent(_ref){let{show,target,onClose,sku}=_ref;const{lookupService}=(0,react.useContext)(cache_context);const[skuData,setSkuData]=(0,react.useState)(null);const[isLoading,setIsLoading]=(0,react.useState)(true);const navigate=(0,dist/* useNavigate */.s0)();// Use useNavigate to navigate programmatically
const location=(0,dist/* useLocation */.TH)();// Use useLocation to get the current location
(0,react.useEffect)(()=>{setIsLoading(true);lookupService.getProducts().then(res=>{const foundSku=res.data.find(product=>product.variantSku===sku);setSkuData(foundSku);}).catch(err=>{console.log(err);}).finally(()=>{setIsLoading(false);});},[sku,lookupService]);const handleEditClick=()=>{onClose();navigate("/skus?edit=".concat(sku),{state:{from:location}});// Pass current location as state
};const handleCreateClick=()=>{onClose();navigate("/skus?new=".concat(sku),{state:{from:location}});// Pass current location as state
};return/*#__PURE__*/(0,jsx_runtime.jsx)(Overlay/* default */.Z,{show:show,target:target,placement:"right",rootClose:true,onHide:onClose,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Popover/* default */.Z,{id:"popover-contained",className:"shadow",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Popover/* default */.Z.Header,{as:"h3",className:"text-white",children:isLoading?/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Loading..."}):skuData?/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:skuData.title}):/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"SKU not found"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Popover/* default */.Z.Body,{children:[isLoading?/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{message:"Loading SKU details...",size:"sm",variant:"dark"}):skuData?/*#__PURE__*/(0,jsx_runtime.jsx)(ListGroup/* default */.Z,{className:"shadow-sm",children:renderSkuData(skuData)}):/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"alert alert-danger",role:"alert",children:"SKU not found"}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-end mt-2",children:skuData?/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn-sm btn-brand",onClick:handleEditClick,children:"Edit"}):/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn-sm btn-brand",onClick:handleCreateClick,children:"Create"})})]})]})});}
;// CONCATENATED MODULE: ./src/components/workobject/order.lineitem.skudetails.component.js
function OrderLineItemSkuDetails(_ref){let{workObject,lineItem,product,fetchWorkObject,productshippingprofiles,productsCache,orderService}=_ref;const[selectedVariant,setSelectedVariant]=(0,react.useState)(lineItem.SKU);const[quantity,setQuantity]=(0,react.useState)(lineItem.Quantity);const[selectedShippingMethod,setSelectedShippingMethod]=(0,react.useState)(product===null||product===void 0?void 0:product.ShippingMethod);const[success,setSuccess]=(0,react.useState)(false);const[showPopover,setShowPopover]=(0,react.useState)(false);const[popoverTarget,setPopoverTarget]=(0,react.useState)(null);const{hasPermission}=(0,react.useContext)(auth_context);(0,react.useEffect)(()=>{if(success){const timer=setTimeout(()=>{fetchWorkObject();setSuccess(false);},3000);return()=>clearTimeout(timer);}},[success,fetchWorkObject]);if(!productsCache||!lineItem){return/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{variant:"dark",size:"sm"});}const allowEditing=hasPermission("order:write")&&hasPermission("line_item:write");const handleShippingMethodChange=e=>{setSelectedShippingMethod(e.target.value);};const handleSave=async()=>{orderService.updateLineItem(workObject.workObject.shopifyOrderId,lineItem.Id,quantity,selectedVariant,selectedShippingMethod).then(res=>{setSuccess(true);}).catch(err=>{console.log(err);}).finally(()=>{});};const isShippableProduct=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===lineItem.SKU&&product.shippingMethod!==null&&product.sensariaProductId!==null);const skuExists=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===lineItem.SKU);const hasSensariaPID=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===lineItem.SKU&&product.sensariaProductId!==null);const hasShipMethod=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===lineItem.SKU&&product.shippingMethod!==null);const hasNumberOfCxImages=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===lineItem.SKU&&product.numberOfCxImages!==null&&product.numberOfCxImages>0);const hasFileType=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===lineItem.SKU&&product.fileType!==null);const hasArtfileNeeded=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===lineItem.SKU&&product.artfileNeeded!==null&&product.artfileNeeded===true);const filteredProductsCache=productsCache.filter(product=>productshippingprofiles.some(profile=>profile.id===product.shippingMethod));let groupedOptions={};filteredProductsCache.forEach(product=>{const groupKey="".concat(product.title," ").concat(product.option3?" - ".concat(product.option3):'');if(!groupedOptions[groupKey]){groupedOptions[groupKey]=[];}groupedOptions[groupKey].push(product);});const handlePopoverToggle=event=>{setShowPopover(!showPopover);setPopoverTarget(event.target);};const renderIgnoredMessage=()=>{let message="This SKU is ignored because the following were set to 0, null, or false:";let reasons=[];if(!hasArtfileNeeded)reasons.push("Artfile Needed");if(!hasFileType)reasons.push("File Type");if(!hasNumberOfCxImages)reasons.push("Number of CX Images");if(!hasSensariaPID)reasons.push("Sensaria PID");if(!hasShipMethod)reasons.push("Shipping Method");if(reasons.length>0){return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[message,/*#__PURE__*/(0,jsx_runtime.jsx)("ul",{children:reasons.map((reason,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)("li",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{bg:"secondary",children:reason})},index))})]});}else{return"You may not have set the SKU correctly.";}};groupedOptions=Object.keys(groupedOptions).map(group=>({label:group,options:groupedOptions[group].map(product=>({label:"".concat(product.option1," / ").concat(product.option2," / ").concat(product.option3," (").concat(product.variantSku,")"),value:product.variantSku}))}));const selectedOption=groupedOptions.flatMap(group=>group.options).find(option=>option.value===selectedVariant);return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[success&&/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z,{variant:"success",children:"Update successful!"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z,{className:"sticky-top-2",children:isShippableProduct!==null&&isShippableProduct!==void 0&&isShippableProduct.shippingMethod&&filteredProductsCache.length>0?/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"fs-5 mb-1",children:"Details"}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"SKU:"})," ",lineItem.SKU,/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"button-tooltip",children:"View SKU Details"}),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faInfoCircle */.sqG,className:"ms-2",style:{cursor:'pointer'},onClick:handlePopoverToggle})}),/*#__PURE__*/(0,jsx_runtime.jsx)(SkuPopoverComponent,{show:showPopover,target:popoverTarget,onClose:()=>setShowPopover(false),sku:lineItem.SKU})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Variant:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_select_esm/* default */.ZP,{value:selectedOption,onChange:selectedOption=>setSelectedVariant(selectedOption.value),options:groupedOptions,isDisabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Qty:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Group,{className:"mb-3 d-flex align-items-center",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{disabled:!allowEditing,type:"number",value:quantity,onChange:e=>setQuantity(e.target.value),"aria-label":"Quantity"})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Shipping Method:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Select,{value:selectedShippingMethod,onChange:handleShippingMethodChange,disabled:!allowEditing,children:productshippingprofiles.map(profile=>/*#__PURE__*/(0,jsx_runtime.jsxs)("option",{value:profile.id,children:[profile.method," (",profile.id,")"]},profile.id))})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mt-2",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"",className:"w-100 btn-brand",onClick:handleSave,children:"Save"})})]}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:skuExists?/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-muted mb-0",children:renderIgnoredMessage()})}):/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{bg:"danger",className:"mb-2",children:"SKU NOT FOUND"})}),/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"SKU:"})," ",lineItem.SKU,/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"button-tooltip",children:"View SKU Details"}),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faInfoCircle */.sqG,className:"ms-2",style:{cursor:'pointer'},onClick:handlePopoverToggle})}),/*#__PURE__*/(0,jsx_runtime.jsx)(SkuPopoverComponent,{show:showPopover,target:popoverTarget,onClose:()=>setShowPopover(false),sku:lineItem.SKU})]})})]});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Accordion.js + 7 modules
var Accordion = __webpack_require__(3274);
;// CONCATENATED MODULE: ./src/components/workobject/order.lineitem.properties.component.js
function OrderLineItemProperties(_ref){let{properties}=_ref;return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:properties&&properties.length>0&&/*#__PURE__*/(0,jsx_runtime.jsx)(Accordion/* default */.Z,{className:"mt-2",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Accordion/* default */.Z.Item,{eventKey:"0",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Accordion/* default */.Z.Header,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Properties"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Accordion/* default */.Z.Body,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(ListGroup/* default */.Z,{children:properties.map((item,index)=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"rounded mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Title:"})," ",item.name]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Value:"})," ",item.value]})]},"".concat(item.name,"-").concat(index)))})})]})})});}
;// CONCATENATED MODULE: ./src/components/shared/download.secureimage.button.component.js
function DownloadSecureImageButton(_ref){let{image,fileName}=_ref;return/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{href:image,variant:"outline-dark",className:"w-100 d-flex align-items-center justify-content-center mb-2 mt-2",download:fileName||"image",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-download me-2",viewBox:"0 0 16 16",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}),/*#__PURE__*/(0,jsx_runtime.jsx)("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"})]})," Download"]});}
;// CONCATENATED MODULE: ./src/components/shared/remove.secureimage.button.component.js
function RemoveSecureImageButton(_ref){let{onClick,isRemoving}=_ref;return/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"outline-danger",className:"w-100 d-flex align-items-center justify-content-center mb-2",onClick:onClick,disabled:isRemoving,children:isRemoving?/*#__PURE__*/(0,jsx_runtime.jsx)(Spinner/* default */.Z,{animation:"border",size:"sm"}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",className:"bi bi-x-circle me-2",viewBox:"0 0 16 16",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),/*#__PURE__*/(0,jsx_runtime.jsx)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})]}),"Remove"]})});}
;// CONCATENATED MODULE: ./src/utils/shouldDisplayElement.js
const shouldDisplayElement=(hasPermission,isAddonProduct,imageType,workObject)=>{const isManager=hasPermission("image_cx:write");const isArtFileDesigner=hasPermission("image_artfile:write");const isPrintFileDesigner=hasPermission("image_printfile:write");if(isAddonProduct){if(imageType==='printfile'&&(isPrintFileDesigner||isManager)&&workObject.workObject.status===4){return true;}else{return false;}}const workObjectStatus=workObject.workObject.status;if(workObjectStatus>1&&workObjectStatus<6||workObjectStatus===9003){if(imageType==='cx'&&isManager){return true;}else if(workObjectStatus===3&&imageType==='artfile'&&(isArtFileDesigner||isManager)){return true;}else if(workObjectStatus===4&&imageType==='printfile'&&(isPrintFileDesigner||isManager)){return true;}else{return false;}}};
// EXTERNAL MODULE: ./node_modules/heic2any/dist/heic2any.js
var heic2any = __webpack_require__(9558);
var heic2any_default = /*#__PURE__*/__webpack_require__.n(heic2any);
// EXTERNAL MODULE: ./node_modules/sweetalert2/dist/sweetalert2.all.js
var sweetalert2_all = __webpack_require__(7910);
var sweetalert2_all_default = /*#__PURE__*/__webpack_require__.n(sweetalert2_all);
;// CONCATENATED MODULE: ./src/components/shared/secureimage.component.js
// Import contexts
const SecureImageComponent=_ref=>{let{workObjectId,workObject,imageType,attachmentId,classes,width,height,petName,fileName,by,uploadedOn,fetchWorkObject,allowDownload=false,isAddonProduct}=_ref;const[image,setImage]=(0,react.useState)(null);const[loading,setLoading]=(0,react.useState)(false);const[isRemoving,setIsRemoving]=(0,react.useState)(false);const[errorMessage,setErrorMessage]=(0,react.useState)(null);const[uploadedBy,setUploadedBy]=(0,react.useState)(null);// Destructure methods and variables from context
const{hasPermission}=(0,react.useContext)(auth_context);const{attachmentService,showToastNotification,getUserById}=(0,react.useContext)(cache_context);const config=(0,react.useContext)(config_context);const showRemoveButton=shouldDisplayElement(hasPermission,isAddonProduct,imageType,workObject);(0,react.useEffect)(()=>{const fetchImage=async()=>{setLoading(true);try{const endpoint="".concat(config.config.baseUrl,"/portal/api/v1/attachment/download/").concat(workObjectId,"/").concat(attachmentId);const response=await axios/* default */.Z.get(endpoint,{...authHeader(),responseType:'arraybuffer'});const blob=new Blob([response.data],{type:'image/jpeg'});// Assume JPEG as a default
let imageUrl;try{// Attempt to convert assuming the file might be HEIC
const conversionResult=await heic2any_default()({blob:blob,toType:'image/jpeg'});imageUrl=URL.createObjectURL(conversionResult);}catch(error){// Handle the specific error from heic2any indicating conversion is not necessary
if(error.code&&[1,2,3,4,5].includes(error.code)){if(error.code===1||error.code===2){// Error code 1 means no conversion is needed
//Error code 2 means the file is not HEIC
imageUrl=URL.createObjectURL(blob);}else{// For other known error codes, save the error message
console.log(error.message);setErrorMessage(error.message);throw error;}}else{// For an unknown error, set a generic message
setErrorMessage('Failed to load or convert image');throw error;}}setImage(imageUrl);}catch(error){console.error('Failed to load or convert image:',error);setImage(null);}finally{setLoading(false);}};fetchImage();},[workObjectId,attachmentId,config.config.baseUrl]);(0,react.useEffect)(()=>{if(by){getUserById(by).then(user=>{setUploadedBy(user);});}},[by,getUserById]);const handleRemoveImage=async()=>{const result=await sweetalert2_all_default().fire({title:'Are you sure?',text:'Do you want to remove this image?',icon:'warning',showCancelButton:true,confirmButtonText:'Yes, remove it!',cancelButtonText:'No, keep it'});if(!result.isConfirmed)return;setIsRemoving(true);try{await attachmentService.deleteAttatchment(workObjectId,attachmentId);fetchWorkObject();showToastNotification("Successfully removed image","success");}catch(error){console.error('Failed to remove image:',error);showToastNotification("Failed to remove image","danger");}finally{setIsRemoving(false);}};if(loading)return/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{message:"Loading image..."});if(!loading&&image===null)return/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{variant:"dark",bg:"dark",children:["$",errorMessage||'Failed to load image']});return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"border border-primary rounded shadow-sm mb-2 position-relative ".concat(classes),children:[/*#__PURE__*/(0,jsx_runtime.jsx)("img",{alt:attachmentId,width:width,height:height,src:image,loading:"lazy",objectFit:"contain"// Corrected "objectfit" to "objectFit"
}),petName&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"bg-secondary p-1 rounded text-white text-center mb-0",children:petName}),fileName&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"bg-secondary p-1 rounded text-white text-center mb-0",children:fileName})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"ms-3 w-100",children:[uploadedOn&&/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"text-muted mb-0",children:["Uploaded ",convertToEasternTime(uploadedOn)]}),by&&/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"text-muted mb-0",children:["by: ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"badge pill-badge bg-secondary text-white",children:uploadedBy})]}),allowDownload&&/*#__PURE__*/(0,jsx_runtime.jsx)(DownloadSecureImageButton,{image:image,fileName:fileName}),showRemoveButton&&/*#__PURE__*/(0,jsx_runtime.jsx)(RemoveSecureImageButton,{onClick:handleRemoveImage,isRemoving:isRemoving})]})]});};/* harmony default export */ const secureimage_component = (SecureImageComponent);
;// CONCATENATED MODULE: ./src/components/shared/upload.component.js
function UploadComponent(_ref){let{fetchWorkObject,workObjectId,imageType,lineItemId,fileTypes,config,cxPhotoIndex,isReplacing=false,isAddonProduct,workObject,lineItemIndex}=_ref;const{hasPermission}=(0,react.useContext)(auth_context);const[isOver,setIsOver]=(0,react.useState)(false);const[isUploading,setIsUploading]=(0,react.useState)(false);const{attachmentService,showToastNotification}=(0,react.useContext)(cache_context);const fileInputRef=(0,react.useRef)(null);const showUpload=shouldDisplayElement(hasPermission,isAddonProduct,imageType,workObject);fileTypes=fileTypes.map(fileType=>fileType.replace('.',''));const handleAutomaticUpload=(file,workObjectId,imageType,lineItemId,cxPhotoIndex)=>{if(file){setIsUploading(true);attachmentService.uploadAttachment(file,workObjectId,imageType,lineItemId,cxPhotoIndex).then(response=>{showToastNotification("Successfully uploaded ".concat(response.data.fileName),'success');fetchWorkObject();}).catch(error=>{console.log(error);showToastNotification(error.response.data.Message,'danger');}).finally(()=>{setIsUploading(false);});}};const handleDragOver=event=>{event.preventDefault();setIsOver(true);};const handleDragLeave=event=>{event.preventDefault();setIsOver(false);};const handleDrop=event=>{event.preventDefault();setIsOver(false);processFiles(event.dataTransfer.files);};const handleFileSelect=event=>{processFiles(event.target.files);};const openFilePicker=()=>{fileInputRef.current.click();};const fileAcceptTypes=imageType==='artfile'?config.artfileTypes:fileTypes;const processFiles=rawFiles=>{const selectedFiles=[];const rejectedFiles=[];Array.from(rawFiles).forEach(file=>{let isValid=false;for(const fileType of fileAcceptTypes){if(file.name.toLowerCase().endsWith(".".concat(fileType))){isValid=true;break;}}if(isValid){selectedFiles.push(file);}else{rejectedFiles.push(file);const reason="File ".concat(file.name," was rejected because it's not a ").concat(fileAcceptTypes.join(', ')," file.");showToastNotification(reason,'warning');}});if(isReplacing){sweetalert2_all_default().fire({title:'Are you sure?',text:'Do you want to replace the existing files?',icon:'warning',showCancelButton:true,confirmButtonText:'Yes',cancelButtonText:'No'}).then(result=>{if(result.isConfirmed){uploadFiles(selectedFiles);}});}else{uploadFiles(selectedFiles);}};const uploadFiles=files=>{files.forEach(file=>{handleAutomaticUpload(file,workObjectId,imageType,lineItemId,cxPhotoIndex);});};if((imageType==='cx'||imageType==='artfile')&&isAddonProduct){if(imageType==='artfile'&&workObject.workObject.status>3&&workObject.workObject.status<6){return/*#__PURE__*/(0,jsx_runtime.jsxs)(Alert/* default */.Z,{variant:"info",className:"mb-0 text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z.Heading,{children:"Warning"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"This is a linked line item and must be managed via the parent line item"})]});}else if(imageType==='artfile'){return/*#__PURE__*/(0,jsx_runtime.jsxs)(Alert/* default */.Z,{variant:"info",className:"mb-0 text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z.Heading,{children:"Warning"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"This is a linked line item. Once you upload to the parent line item the image will display here as well"})]});}else{return null;}}if(imageType==='printfile'&&workObject.workObject.status===3){return/*#__PURE__*/(0,jsx_runtime.jsxs)(Alert/* default */.Z,{variant:"warning",className:"mb-0 text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z.Heading,{children:"Warning"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"Artfile is pending please upload artfile"})]});}else if(imageType==='printfile'&&workObject.workObject.status===9003){return/*#__PURE__*/(0,jsx_runtime.jsxs)(Alert/* default */.Z,{variant:"warning",className:"mb-0 text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z.Heading,{children:"Warning!"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"Customer photo failure. Please resolve error first"})]});}if(imageType==='artfile'&&workObject.workObject.status===4){return/*#__PURE__*/(0,jsx_runtime.jsxs)(Alert/* default */.Z,{variant:"warning",className:"mb-0 text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z.Heading,{children:"Warning"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"Please return this order. Once returned you may edit the artfile"})]});}else if(imageType==='artfile'&&workObject.workObject.status===9003){return/*#__PURE__*/(0,jsx_runtime.jsxs)(Alert/* default */.Z,{variant:"warning",className:"mb-0 text-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z.Heading,{children:"Warning"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"Customer photo failure. Please resolve error first"})]});}console.log(workObject);return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:showUpload&&/*#__PURE__*/(0,jsx_runtime.jsxs)("section",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h6",{className:"text-center bg-brand rounded-top p-1 mb-0 text-white",children:isReplacing?'Replace the existing file(s)':"Upload a new ".concat(imageType)}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{onDragOver:handleDragOver,onDragLeave:handleDragLeave,onDrop:handleDrop,className:isOver?'display-flex justify-content-center align-items-center uploadBoxDragged rounded-bottom shadow position-relative p-2 bg-brand-light text-white text-center':'display-flex justify-content-center align-items-center uploadBox rounded-bottom shadow-sm position-relative p-2 text-muted text-center',children:[imageType==='artfile'&&/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"p-2 rounded fw-bold mb-0 alert alert-warning",children:["File Name: ",workObject.workObject.metadata.orderName.replace('#',''),"-",lineItemIndex+1,"_",cxPhotoIndex,".",imageType==='artfile'?config.artfileTypes[0].toLowerCase():fileTypes.join(', ').toLowerCase()]}),imageType==='printfile'&&/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"p-2 rounded fw-bold mb-0 alert alert-warning",children:["File Name: ",workObject.workObject.metadata.orderName.replace('#',''),"-",lineItemIndex+1,".",imageType==='artfile'?config.artfileTypes[0].toLowerCase():fileTypes.join(', ').toLowerCase()]}),"Drag and drop some files here, or",/*#__PURE__*/(0,jsx_runtime.jsx)("button",{className:isOver?'ms-2 btn btn-sm btn-light my-1':'ms-2 btn btn-sm btn-outline-secondary my-1',onClick:openFilePicker,children:"click here to select files"}),/*#__PURE__*/(0,jsx_runtime.jsx)("br",{}),/*#__PURE__*/(0,jsx_runtime.jsxs)("em",{children:["(Only ",imageType==='artfile'?config.artfileTypes[0].toUpperCase():fileTypes.join(', ').toUpperCase()," files will be accepted)"]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("input",{ref:fileInputRef,type:"file",style:{display:'none'},accept:fileAcceptTypes.map(type=>".".concat(type)).join(','),multiple:true,onChange:handleFileSelect}),isUploading?/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mt-3",children:/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{message:"Uploading..."})}):null]})});}
;// CONCATENATED MODULE: ./src/components/workobject/order.lineitem.attatchments.js
function OrderLineItemAttachments(_ref){let{workObjectId,attachment,fetchWorkObject,lineItemId,imageType,fileTypes,config,cxPhotoIndex,isAddonProduct,workObject,lineItemIndex}=_ref;const isReplacing=attachment!==null&&attachment!==undefined;const{lineItems}=workObject.workObject;function getPetName(lineItems,lineItemId,index){if(index<1||index>4){// throw new Error("Index must be between 1 and 4.");
return'No name found';}for(const item of lineItems){if(item.lineItem.id===lineItemId){const petNameProperty=item.lineItem.properties.find(prop=>prop.name==="Pet Name ".concat(index));if(petNameProperty){return petNameProperty.value;}else{return"No name found";}}}return'No name found';}let petName=attachment!==null&&attachment!==void 0&&attachment.metadata?getPetName(lineItems,attachment.metadata.lineItemId,cxPhotoIndex+1):'No name found';return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"alert alert-light mb-4",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"d-flex align-items-center flex-column flex-lg-row flex-md-column",children:attachment&&/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(secureimage_component,{workObjectId:workObjectId,attachmentId:attachment.id,classes:"rounded rounded-bottom-0",fileName:attachment.fileName,uploadedOn:attachment.uploadedOn,petName:petName,width:130,by:attachment===null||attachment===void 0?void 0:attachment.userId,fetchWorkObject:fetchWorkObject,allowDownload:true,isAddonProduct:isAddonProduct,workObject:workObject,imageType:imageType})})}),fileTypes.length>0&&/*#__PURE__*/(0,jsx_runtime.jsx)(UploadComponent,{cxPhotoIndex:imageType==='cx'||imageType==='artfile'?cxPhotoIndex+1:null,isReplacing:isReplacing,lineItemId:lineItemId,workObjectId:workObjectId,imageType:imageType,fileTypes:fileTypes,fetchWorkObject:fetchWorkObject,config:config,isAddonProduct:isAddonProduct,workObject:workObject,lineItemIndex:lineItemIndex})]});}
;// CONCATENATED MODULE: ./src/components/workobject/order.lineitem.tracking.component.js
function OrderFulfillmentLineItems(_ref){var _workObject$workObjec,_workObject$workObjec2,_workObject$workObjec3,_workObject$workObjec4,_workObject$workObjec5,_workObject$workObjec6;let{workObject,lineItem}=_ref;const[buttonText,setButtonText]=(0,react.useState)("Copy Email");const lineItems=(workObject===null||workObject===void 0?void 0:(_workObject$workObjec=workObject.workObject)===null||_workObject$workObjec===void 0?void 0:(_workObject$workObjec2=_workObject$workObjec.metadata)===null||_workObject$workObjec2===void 0?void 0:(_workObject$workObjec3=_workObject$workObjec2.fulfillmentTracker)===null||_workObject$workObjec3===void 0?void 0:_workObject$workObjec3.LineItems)||[];const matchedLineItem=lineItems.find(item=>item.LineItemId===(lineItem===null||lineItem===void 0?void 0:lineItem.Id));const handleGetSensariaOrderFailureEmail=(orderID,lineItemID)=>{return"\n        We have an order that has a held status can you please look into this order. \n\n        order id: ".concat(orderID," \n\n        line item id: ").concat(lineItemID," \n\n        thank you, \n\n        ");};const handleCopyEmail=(orderID,lineItemID)=>{const email=handleGetSensariaOrderFailureEmail(orderID,lineItemID);copyToClipboard(email);setButtonText("Copied!");setTimeout(()=>{setButtonText("Copy Email");},2000);// Revert to original text after 2 seconds
};// const handlePrepPopulateEmail = (orderID, lineItemID) => {
//     const emailBody = handleGetSensariaOrderFailureEmail(orderID, lineItemID);
//     const url =`https://mail.google.com/a/ecomgraduates.com/mail?compose=new&to=glen@ecomgraduates.com&su=Order ${orderID} Issue&body=${emailBody}&cc=ben@westandwillow.com`
//     window.open(url, '_blank');
// }
const sensariaErrors=[3,5,16,23,37];return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:matchedLineItem&&/*#__PURE__*/(0,jsx_runtime.jsx)(Accordion/* default */.Z,{className:"mt-2",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Accordion/* default */.Z.Item,{eventKey:"0",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Accordion/* default */.Z.Header,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{className:"me-2",children:"Sensaria Details"}),/*#__PURE__*/(0,jsx_runtime.jsx)(SensariaStatusBadgeComponent,{status:matchedLineItem.Status})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Accordion/* default */.Z.Body,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(ListGroup/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"rounded mb-2",children:[matchedLineItem.TrackingNumber?/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Tracking Number:"})," ",matchedLineItem.TrackingNumber]}):null,/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Sensaria Order ID: "}),workObject===null||workObject===void 0?void 0:(_workObject$workObjec4=workObject.workObject)===null||_workObject$workObjec4===void 0?void 0:(_workObject$workObjec5=_workObject$workObjec4.metadata)===null||_workObject$workObjec5===void 0?void 0:(_workObject$workObjec6=_workObject$workObjec5.fulfillmentTracker)===null||_workObject$workObjec6===void 0?void 0:_workObject$workObjec6.SensariaOrderNumber]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Sensaria Line Item ID: "}),matchedLineItem.LineItemId]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Status: "}),/*#__PURE__*/(0,jsx_runtime.jsx)(SensariaStatusBadgeComponent,{status:matchedLineItem.Status})]}),matchedLineItem.TrackingUrl?/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Tracking Url:"})," ",/*#__PURE__*/(0,jsx_runtime.jsxs)("a",{className:"btn btn-outline-secondary btn sm",href:matchedLineItem.TrackingUrl,target:"_blank",rel:"noopener noreferrer",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faTruckArrowRight */.Y_D})," Track Package"]})]}):null,sensariaErrors.includes(matchedLineItem.Status)?/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Sensaria Email Template:"}),/*#__PURE__*/(0,jsx_runtime.jsx)("button",{className:"btn btn-outline-secondary btn-sm ms-2",onClick:()=>{var _workObject$workObjec7,_workObject$workObjec8,_workObject$workObjec9;return handleCopyEmail(workObject===null||workObject===void 0?void 0:(_workObject$workObjec7=workObject.workObject)===null||_workObject$workObjec7===void 0?void 0:(_workObject$workObjec8=_workObject$workObjec7.metadata)===null||_workObject$workObjec8===void 0?void 0:(_workObject$workObjec9=_workObject$workObjec8.fulfillmentTracker)===null||_workObject$workObjec9===void 0?void 0:_workObject$workObjec9.SensariaOrderNumber,matchedLineItem.LineItemId);},children:buttonText})]}):null]})})})]})})});}
;// CONCATENATED MODULE: ./src/components/workobject/order.lineitems.component.js
function OrderLineItems(_ref){var _workObject$workObjec;let{workObject,productsCache,productshippingprofiles,fetchWorkObject,config,orderService}=_ref;if(!(workObject!==null&&workObject!==void 0&&workObject.workObject)||!(workObject!==null&&workObject!==void 0&&(_workObject$workObjec=workObject.workObject)!==null&&_workObject$workObjec!==void 0&&_workObject$workObjec.attachments)){return/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{message:"Loading line items..."});}const isUploadNeeded=lineItem=>{const{Product}=lineItem;if(!Product)return false;const{ArtfileNeeded,NumberOfCxImages,ShippingMethod,SensariaProductId}=Product;return ArtfileNeeded||!ArtfileNeeded&&NumberOfCxImages===0&&ShippingMethod&&SensariaProductId;};const getFileTypes=(attachmentType,artFileTypeRequired)=>{if(attachmentType==='artfile'||attachmentType==='printfile'){return artFileTypeRequired?[artFileTypeRequired]:[attachmentType==='artfile'?'.png':'.jpg'];}return[];};const parentProductMap=new Map();workObject.workObject.metadata.lineItems.forEach(LineItem=>{var _LineItem$LineItem$Pr;const parentIdProperty=(_LineItem$LineItem$Pr=LineItem.LineItem.Properties)===null||_LineItem$LineItem$Pr===void 0?void 0:_LineItem$LineItem$Pr.find(property=>property.Name==='id');if(parentIdProperty){parentProductMap.set(parentIdProperty.Value,LineItem);}});const checkAddonProductParentId=LineItem=>{var _LineItem$LineItem$Pr2;const parentIdProperty=(_LineItem$LineItem$Pr2=LineItem.LineItem.Properties)===null||_LineItem$LineItem$Pr2===void 0?void 0:_LineItem$LineItem$Pr2.find(property=>property.Name==='parentId');if(parentIdProperty){return parentProductMap.has(parentIdProperty.Value);}return false;};const handleScrollTo=id=>{setTimeout(()=>{const element=document.getElementById(id);if(element){element.scrollIntoView({behavior:'smooth'});}},0);};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Row/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Col/* default */.Z,{md:12,children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-start mb-2",children:/*#__PURE__*/(0,jsx_runtime.jsx)("h4",{className:"mb-0 ms-1",children:"Line Items"})})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Row/* default */.Z,{className:"mb-2",children:workObject.workObject.metadata.lineItems.map((LineItem,lineItemIndex)=>{var _LineItem$LineItem$Pr3,_LineItem$LineItem$Pr4,_LineItem$LineItem$Pr5,_LineItem$LineItem$Pr6,_LineItem$LineItem$Pr7,_LineItem$LineItem$Pr8,_LineItem$Product,_LineItem$Product2;const workObjectId=workObject.workObject.id;const lineItemId=LineItem.LineItem.Id;const isAddonProduct=(_LineItem$LineItem$Pr3=LineItem.LineItem.Properties)===null||_LineItem$LineItem$Pr3===void 0?void 0:_LineItem$LineItem$Pr3.some(property=>property.Name==='parentId');const isParentProduct=(_LineItem$LineItem$Pr4=LineItem.LineItem.Properties)===null||_LineItem$LineItem$Pr4===void 0?void 0:_LineItem$LineItem$Pr4.some(property=>property.Name==='id');const childId=(_LineItem$LineItem$Pr5=LineItem.LineItem.Properties)===null||_LineItem$LineItem$Pr5===void 0?void 0:(_LineItem$LineItem$Pr6=_LineItem$LineItem$Pr5.find(property=>property.Name==='parentId'))===null||_LineItem$LineItem$Pr6===void 0?void 0:_LineItem$LineItem$Pr6.Value;const parentId=(_LineItem$LineItem$Pr7=LineItem.LineItem.Properties)===null||_LineItem$LineItem$Pr7===void 0?void 0:(_LineItem$LineItem$Pr8=_LineItem$LineItem$Pr7.find(property=>property.Name==='id'))===null||_LineItem$LineItem$Pr8===void 0?void 0:_LineItem$LineItem$Pr8.Value;const artFileTypeRequired=LineItem===null||LineItem===void 0?void 0:(_LineItem$Product=LineItem.Product)===null||_LineItem$Product===void 0?void 0:_LineItem$Product.FileType;const uploadNeeded=isUploadNeeded(LineItem);const imageCountNeeded=LineItem===null||LineItem===void 0?void 0:(_LineItem$Product2=LineItem.Product)===null||_LineItem$Product2===void 0?void 0:_LineItem$Product2.NumberOfCxImages;const lineItemAttachments=workObject.workObject.attachments.filter(attachment=>attachment.metadata.lineItemId===lineItemId);const isShippableProduct=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===LineItem.LineItem.SKU&&product.shippingMethod!==null&&product.sensariaProductId!==null);const parentIdMatch=isAddonProduct?checkAddonProductParentId(LineItem):true;const skuExists=productsCache===null||productsCache===void 0?void 0:productsCache.find(product=>product.variantSku===LineItem.LineItem.SKU);return/*#__PURE__*/(0,jsx_runtime.jsx)(Col/* default */.Z,{md:12,className:"mb-3",id:isAddonProduct&&parentIdMatch?"child-".concat(childId):isParentProduct?"parent-".concat(parentId):null,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Card/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Card/* default */.Z.Header,{className:"bg-brand text-white d-flex",children:[LineItem.LineItem.Name.split('-')[0]," | ",/*#__PURE__*/(0,jsx_runtime.jsx)("b",{className:"ms-1",children:"Line Item ID:"}),LineItem.LineItem.Id,/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"ms-auto",children:[!isShippableProduct&&skuExists?/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"p-1 rounded bg-danger ms-1",children:"IGNORED"}):!skuExists?/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"p-1 rounded bg-danger ms-1",children:"SKU NOT FOUND"}):null,isAddonProduct&&parentIdMatch?/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"bg-secondary rounded p-1 text-white ms-1 parent-child-label",onClick:()=>handleScrollTo("parent-".concat(childId)),children:["Child Product ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"child-parent-id",children:childId})]}):isAddonProduct&&!parentIdMatch&&/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"bg-danger rounded p-1 text-white ms-1",children:["Parent ID ",childId," Not Found"]}),isParentProduct&&!isAddonProduct&&/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"bg-secondary rounded p-1 text-white ms-1 parent-child-label",onClick:()=>handleScrollTo("child-".concat(parentId)),children:["Parent Product ",parentId]}),uploadNeeded&&(imageCountNeeded<1?/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"bg-danger rounded p-1 text-white ms-1",children:"No CX Images Needed"}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"bg-warning rounded p-1 text-white ms-1",children:[imageCountNeeded," CX Images Needed"]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"bg-info rounded p-1 text-white ms-1",children:[imageCountNeeded," Artfiles Needed"]})]}))]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.Z.Body,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Col/* default */.Z,{md:3,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(OrderLineItemSkuDetails,{lineItem:LineItem.LineItem,product:LineItem.Product,productsCache:productsCache,fetchWorkObject:fetchWorkObject,productshippingprofiles:productshippingprofiles,orderService:orderService,workObject:workObject}),/*#__PURE__*/(0,jsx_runtime.jsx)(OrderFulfillmentLineItems,{workObject:workObject,lineItem:LineItem.LineItem}),/*#__PURE__*/(0,jsx_runtime.jsx)(OrderLineItemProperties,{properties:LineItem.LineItem.properties})]}),uploadNeeded&&["cx","artfile","printfile"].map(attachmentType=>{const lineItemAttachmentsOfType=lineItemAttachments.filter(attachment=>attachment.type===attachmentType);return/*#__PURE__*/(0,jsx_runtime.jsxs)(Col/* default */.Z,{md:3,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"fs-5 mb-1 text-capitalize",children:attachmentType}),attachmentType==='cx'&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[lineItemAttachmentsOfType.map((attachment,attachmentIndex)=>/*#__PURE__*/(0,jsx_runtime.jsx)(OrderLineItemAttachments,{cxPhotoIndex:attachmentIndex,workObjectId:workObjectId,attachment:attachment,fetchWorkObject:fetchWorkObject,lineItemId:lineItemId,imageType:attachmentType,fileTypes:config.cxImageTypes,config:config,isAddonProduct:isAddonProduct&&parentIdMatch,workObject:workObject,lineItemIndex:lineItemIndex},"".concat(attachment.id,"-").concat(attachmentIndex))),Array.from({length:Math.max(0,imageCountNeeded-lineItemAttachmentsOfType.length)}).map((_,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"alert alert-light mb-4",children:/*#__PURE__*/(0,jsx_runtime.jsx)(UploadComponent,{cxPhotoIndex:index+lineItemAttachmentsOfType.length+1// Adding 1 here
,lineItemId:lineItemId,workObjectId:workObjectId,imageType:attachmentType,fileTypes:config.cxImageTypes,fetchWorkObject:fetchWorkObject,config:config,isReplacing:false,isAddonProduct:isAddonProduct&&parentIdMatch,workObject:workObject,lineItemIndex:lineItemIndex})},index))]}),attachmentType==='artfile'&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[lineItemAttachmentsOfType.map((attachment,attachmentIndex)=>/*#__PURE__*/(0,jsx_runtime.jsx)(OrderLineItemAttachments,{cxPhotoIndex:attachmentIndex,workObjectId:workObjectId,attachment:attachment,fetchWorkObject:fetchWorkObject,lineItemId:lineItemId,imageType:attachmentType,fileTypes:config.cxImageTypes,config:config,isAddonProduct:isAddonProduct&&parentIdMatch,workObject:workObject,lineItemIndex:lineItemIndex},"".concat(attachment.id,"-").concat(attachmentIndex))),Array.from({length:Math.max(0,imageCountNeeded-lineItemAttachmentsOfType.length)}).map((_,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"alert alert-light mb-4",children:/*#__PURE__*/(0,jsx_runtime.jsx)(UploadComponent,{cxPhotoIndex:index+lineItemAttachmentsOfType.length+1// Adding 1 here
,lineItemId:lineItemId,workObjectId:workObjectId,imageType:attachmentType,fileTypes:config.cxImageTypes,fetchWorkObject:fetchWorkObject,config:config,isReplacing:false,isAddonProduct:isAddonProduct&&parentIdMatch,workObject:workObject,lineItemIndex:lineItemIndex})},index))]}),attachmentType==='printfile'&&/*#__PURE__*/(0,jsx_runtime.jsx)(OrderLineItemAttachments,{workObjectId:workObjectId,attachment:lineItemAttachmentsOfType[0],fetchWorkObject:fetchWorkObject,lineItemId:lineItemId,imageType:attachmentType,fileTypes:getFileTypes(attachmentType,artFileTypeRequired),config:config,isAddonProduct:isAddonProduct,workObject:workObject,lineItemIndex:lineItemIndex},"".concat(lineItemIndex,"-").concat(attachmentType))]},"".concat(lineItemIndex,"-").concat(attachmentType));})]})})]})},lineItemIndex);})})]});}
;// CONCATENATED MODULE: ./src/components/workobject/order.customer.component.js
function OrderCustomerInformation(_ref){let{workObject,customer,shippingAddress,orderService,fetchWorkObject}=_ref;const[editedShippingAddress,setEditedShippingAddress]=(0,react.useState)({...shippingAddress});const[success,setSuccess]=(0,react.useState)(false);const{hasPermission}=(0,react.useContext)(auth_context);const allowEditing=hasPermission("order:write")&&hasPermission("line_item:write");(0,react.useEffect)(()=>{if(success){const timer=setTimeout(()=>{fetchWorkObject();setSuccess(false);},3000);return()=>clearTimeout(timer);}},[success,fetchWorkObject]);const handleInputChange=event=>{const{name,value}=event.target;setEditedShippingAddress(prevState=>({...prevState,[name]:value}));};const handleSave=async e=>{e.preventDefault();orderService.updateShippingAddress(workObject.workObject.shopifyOrderId,editedShippingAddress).then(res=>{setSuccess(true);}).catch(err=>{console.log(err);}).finally(()=>{});};return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Col/* default */.Z,{md:6,sm:12,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-start mb-2",children:/*#__PURE__*/(0,jsx_runtime.jsx)("h4",{className:"mb-0 ms-1",children:"Customer"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Card/* default */.Z.Body,{children:[success&&/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z,{variant:"success",children:"Shipping address updated successfully!"}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z,{onSubmit:handleSave,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"First Name"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"FirstName",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.FirstName)||"",onChange:handleInputChange,disabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Last Name"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"LastName",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.LastName)||"",onChange:handleInputChange,disabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-12 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Email"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"Email",defaultValue:(customer===null||customer===void 0?void 0:customer.Email)||"",disabled:!allowEditing})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Address Line 1"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"Address1",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.Address1)||"",onChange:handleInputChange,disabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Address Line 2"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"address2",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.Address2)||"",onChange:handleInputChange,disabled:!allowEditing})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"City"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"City",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.City)||"",onChange:handleInputChange,disabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Province"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"Province",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.Province)||"",onChange:handleInputChange,disabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Province Code"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"ProvinceCode",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.ProvinceCode)||"",onChange:handleInputChange,disabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Country"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"Country",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.Country)||"",onChange:handleInputChange,disabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Country Code"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"CountryCode",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.CountryCode)||"",onChange:handleInputChange,disabled:!allowEditing})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"col-md-6 mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Zip"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{name:"Zip",value:(editedShippingAddress===null||editedShippingAddress===void 0?void 0:editedShippingAddress.Zip)||"",onChange:handleInputChange,disabled:!allowEditing})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-end",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn btn-brand",type:"submit",disabled:!allowEditing,children:"Save"})})]})]})})]})});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Collapse.js
var Collapse = __webpack_require__(6050);
;// CONCATENATED MODULE: ./src/components/workobject/order.comments.component.js
function OrderCommentsComponent(_ref){let{comments,orderId,fetchWorkObject}=_ref;const[open,setOpen]=(0,react.useState)({});const[newComment,setNewComment]=(0,react.useState)('');const[error,setError]=(0,react.useState)('');const[loading,setLoading]=(0,react.useState)({});const{commentsService,getUserById}=(0,react.useContext)(cache_context);const[userDisplayNames,setUserDisplayNames]=(0,react.useState)({});const textAreaRefs=(0,react.useRef)({});(0,react.useEffect)(()=>{comments.forEach(comment=>{textAreaRefs.current[comment.id]=/*#__PURE__*/(0,react.createRef)();getUserById(comment.userId).then(displayName=>{setUserDisplayNames(prevState=>({...prevState,[comment.userId]:displayName}));});});},[comments,getUserById]);const handleNewCommentChange=event=>{setNewComment(event.target.value);};const handleNewCommentSubmit=()=>{if(newComment.trim()){setLoading({newComment:true});handleNewComment(newComment);setNewComment('');}};const handleNewComment=message=>{commentsService.newComment(orderId,message).then(()=>{fetchWorkObject();setError('');}).catch(error=>{setError('Failed to post a new comment. Please try again.');}).finally(()=>setLoading(prev=>({...prev,newComment:false})));};const handleReply=commentId=>{const message=textAreaRefs.current[commentId].current.value;if(message.trim()){setLoading(prev=>({...prev,[commentId]:true}));commentsService.replyToComment(orderId,message,commentId).then(()=>{fetchWorkObject();setError('');handleToggle(commentId);}).catch(error=>{setError('Failed to post a reply. Please try again.');}).finally(()=>setLoading(prev=>({...prev,[commentId]:false})));}};const handleDeleteComment=commentId=>{commentsService.deleteComment(orderId,commentId).then(()=>{fetchWorkObject();setError('');}).catch(error=>{setError('Failed to delete the comment. Please try again.');});};const handleToggle=id=>{setOpen(prevOpen=>({...prevOpen,[id]:!prevOpen[id]}));};const renderComments=function(comments){let level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return comments.map(comment=>{if(!textAreaRefs.current[comment.id])textAreaRefs.current[comment.id]=/*#__PURE__*/(0,react.createRef)();return/*#__PURE__*/(0,jsx_runtime.jsxs)("details",{open:true,className:"comment",id:"comment-".concat(comment.id),style:{marginLeft:level*20},children:[/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"#comment-".concat(comment.id),className:"comment-border-link",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"sr-only",children:["Jump to comment-",comment.id]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("summary",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"comment-heading",children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"comment-info",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"flex-shrink-0 me-2 position-relative comment-user-image",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faUser */.ILF}),/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"comment-author",children:[" ",userDisplayNames[comment.userId]||'Loading...']}),/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"m-0",children:[" ",timeSince(comment.timestamp)]})]})})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"comment-body",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"border p-2 rounded shadow-sm border-light",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"rounded-4 bg-light p-2 ps-3",children:comment.message}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"text-end",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"",className:"".concat(open[comment.id]?'fade hide btn-sm btn-brand':'fade show btn-sm btn-brand'),onClick:()=>handleToggle(comment.id),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faComment */.Mzg})," Reply"]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"danger",className:"".concat(open[comment.id]?'fade hide btn-sm ms-2':'fade show btn-sm ms-2'),onClick:()=>handleDeleteComment(comment.id),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faTrash */.$aW})," Delete"]})]}),loading[comment.id]&&/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{message:"Posting your reply...",variant:"dark",size:"sm"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Collapse/* default */.Z,{in:open[comment.id],children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"reply-form",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Floating,{className:"mb-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{as:"textarea",ref:textAreaRefs.current[comment.id],className:"form-control h-auto",placeholder:"Your reply...",rows:"4"}),/*#__PURE__*/(0,jsx_runtime.jsx)("label",{htmlFor:"reply-comment-textarea-".concat(comment.id),children:"Your reply..."})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-content-end align-items-center mt-2",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"",className:"btn-sm me-2 btn-brand",onClick:()=>handleReply(comment.id),disabled:loading[comment.id],children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faComment */.Mzg})," Comment"]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",className:"btn-sm",onClick:()=>handleToggle(comment.id),children:"Cancel"})]})]})})]})}),comment.childComments&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"replies",children:renderComments(comment.childComments,level+1)})]},"comment-".concat(comment.id));});};return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[error&&/*#__PURE__*/(0,jsx_runtime.jsx)(Alert/* default */.Z,{variant:"danger",onClose:()=>setError(''),dismissible:true,children:error}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{maxHeight:'600px',overflow:'hidden',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"comment-thread",style:{overflowY:'auto',flexGrow:1},children:[loading.newComment&&/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{message:"Posting your comment...",variant:"dark",size:"sm"}),comments&&comments.length>0&&renderComments(comments)]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(InputGroup/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{as:"textarea",className:"rounded-4 rounded-end-0",placeholder:"Add a new comment...",value:newComment,onChange:handleNewCommentChange}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"",className:"rounded-4 rounded-start-0 btn-brand",onClick:handleNewCommentSubmit,disabled:loading.newComment,children:"Post"})]})]})]});}
;// CONCATENATED MODULE: ./src/components/workobject/order.activity.component.js
// Added useRef
// Added faArrowUp
const ActivityFeed=_ref=>{let{activityData}=_ref;const{getUserById}=(0,react.useContext)(cache_context);const[sortAsc,setSortAsc]=(0,react.useState)(true);const[collapsed,setCollapsed]=(0,react.useState)({});const[userNames,setUserNames]=(0,react.useState)({});const[toggleAll,setToggleAll]=(0,react.useState)(false);const[showScrollTop,setShowScrollTop]=(0,react.useState)(false);const[totalEvents,setTotalEvents]=(0,react.useState)(0);// Added totalEvents
const containerRef=(0,react.useRef)(null);const handleScroll=()=>{if(containerRef.current.scrollTop>0){setShowScrollTop(true);}else{setShowScrollTop(false);}};(0,react.useEffect)(()=>{const initialCollapsedState={};const userIds=new Set();let eventCount=0;activityData.results.forEach(activity=>{activity.changes.forEach(change=>{eventCount++;const changeId="".concat(activity.id,"-").concat(change.id);initialCollapsedState[changeId]=true;if(change.field==='assignedTo'||change.field==='userId'||change.field==='assignedToPrevious'){if(change.currentValue)userIds.add(change.currentValue);if(change.modifiedValue)userIds.add(change.modifiedValue);}});if(activity.userId){userIds.add(activity.userId);}});setTotalEvents(eventCount);setCollapsed(initialCollapsedState);(async()=>{const fetchedNames={};for(const userId of userIds){const name=await getUserById(userId);fetchedNames[userId]=name||'Unavailable';}setUserNames(fetchedNames);})();},[activityData,getUserById]);(0,react.useEffect)(()=>{const containerElement=containerRef.current;containerElement.addEventListener('scroll',handleScroll);return()=>containerElement.removeEventListener('scroll',handleScroll);},[]);const toggleAllCollapsed=()=>{const newState={};Object.keys(collapsed).forEach(key=>{newState[key]=toggleAll;});setToggleAll(!toggleAll);setCollapsed(newState);};const scrollToTop=()=>{containerRef.current.scrollTo({top:0,behavior:'smooth'});};const sortedResults=activityData.results.filter(activity=>activity.auditType.name!=='Transition').sort((a,b)=>{const dateA=new Date(a.timestamp);const dateB=new Date(b.timestamp);return sortAsc?dateA-dateB:dateB-dateA;});const toggleCollapsed=changeId=>{setCollapsed(prevState=>({...prevState,[changeId]:!prevState[changeId]}));};const formatActivity=activity=>{const dynamicArrayFieldRegex=/^(.+)\[(\d+)\](\..+)?$/;let result={type:'',activity:'',oldValue:activity.currentValue,newValue:activity.modifiedValue};const setUserValue=value=>value?userNames[value]||'Fetching...':'System';if(dynamicArrayFieldRegex.test(activity.field)){const match=dynamicArrayFieldRegex.exec(activity.field);const arrayBase=match[1];const arrayIndex=match[2];const property=match[3]?match[3].substring(1):'';result.type=property||arrayBase;result.activity="".concat(property||arrayBase," changed");switch(property){case'sourceUser':case'assignedTo':case'designatedPrintFileDesigner':result.oldValue=setUserValue(activity.currentValue);result.newValue=setUserValue(activity.modifiedValue);break;case'originalFileName':result.type='fileName';result.activity='File name changed';break;case'metadata.lineItemId':case'LineItem.Name':case'LineItem.VariantTitle':case'LineItem.VariantId':case'LineItem.SKU':case'fileSize':break;default:if(!property){result.activity="".concat(arrayBase," at index ").concat(arrayIndex," changed");if(arrayBase==='comments'){result.activity='New comment';result.type='comment';result.oldValue=null;result.newValue=null;}else{result.type='arrayChange';}}break;}}else{result.type=activity.field;result.activity="".concat(activity.field," changed");switch(activity.field){case'status':result.oldValue=/*#__PURE__*/(0,jsx_runtime.jsx)(StatusBadgeComponent,{status:parseInt(activity.currentValue)});result.newValue=/*#__PURE__*/(0,jsx_runtime.jsx)(StatusBadgeComponent,{status:parseInt(activity.modifiedValue)});break;case'shopifyOrderId':case'orderName':case'orderNumber':break;case'sourceUser':case'assignedTo':case'assignedToPrevious':case'designatedPrintFileDesigner':result.oldValue=setUserValue(activity.currentValue);result.newValue=setUserValue(activity.modifiedValue);break;case'customerEmail':case'lastModified':break;default:break;}}return result;};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z,{fluid:true,style:{maxHeight:'500px',overflowY:'auto'},ref:containerRef,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex sticky-top bg-white w-100 shadow-sm p-2 rounded-bottom",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"flex-grow-1",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"bg-light text-dark d-inline-block me-2 p-2 rounded",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{className:"mb-0",children:"Events"})," ",/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-dark text-white d-inline-block",children:totalEvents})]})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"light me-2",onClick:()=>setSortAsc(!sortAsc),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:sortAsc?free_solid_svg_icons/* faArrowDownWideShort */.MdH:free_solid_svg_icons/* faArrowUpWideShort */.J$0})," Sort"]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{variant:"light",onClick:toggleAllCollapsed,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:toggleAll?free_solid_svg_icons/* faEye */.Mdf:free_solid_svg_icons/* faEyeSlash */.Aq})," Toggle All"]})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("ul",{className:"timeline",children:sortedResults.map((activity,index)=>activity.changes.map((change,changeIndex)=>{const formattedChange=formatActivity(change);const changeId="".concat(activity.id,"-").concat(change.id);return/*#__PURE__*/(0,jsx_runtime.jsxs)("li",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"timeline-icon",children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:"\xA0"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"timeline-body bg-light border border-dark shadow-sm",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"position-absolute end-0 top-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"bg-transparent text-muted border-0 p-2",onClick:()=>toggleCollapsed(changeId),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:collapsed[changeId]?free_solid_svg_icons/* faEyeSlash */.Aq:free_solid_svg_icons/* faEye */.Mdf})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"timeline-header",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"username",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-dark text-white",children:formattedChange.activity}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("strong",{children:["User: ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"text-muted",children:activity.userId?userNames[activity.userId]||'Fetching...':'System'})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("strong",{children:["On: ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"date text-muted",children:convertToEasternTime(activity.timestamp,false,false)})]})]})]})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"timeline-content ".concat(collapsed[changeId]?'':'open'),children:[/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{}),/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"mb-0",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"User:"})," ",activity.userId?userNames[activity.userId]||'Fetching...':'System']}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Activity:"})," ",formattedChange.activity]}),formattedChange.oldValue&&/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Previous Value:"})," ",formattedChange.oldValue]}),formattedChange.newValue&&/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Updated Value:"})," ",formattedChange.newValue]})]})]})]})]},"".concat(changeId));}))}),showScrollTop&&/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",style:{position:'absolute',right:'3rem',bottom:'1rem',zIndex:1},onClick:scrollToTop,children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faArrowUp */.FPD})})]});};/* harmony default export */ const order_activity_component = (ActivityFeed);
;// CONCATENATED MODULE: ./src/components/workobject/workobject.component.js
function WorkObject(){const{orderId}=(0,dist/* useParams */.UO)();const{config}=(0,react.useContext)(config_context);const{hasPermission,user}=(0,react.useContext)(auth_context);const{orderService,lookupService,getProductsCache,productscache,getProductShippingProfiles,productshippingprofiles}=(0,react.useContext)(cache_context);const[isLoading,setIsLoading]=(0,react.useState)(true);const[workObject,setWorkObject]=(0,react.useState)(null);const[refreshWorkObject,setRefreshWorkObject]=(0,react.useState)(true);const[error,setError]=(0,react.useState)(null);(0,react.useEffect)(()=>{if(refreshWorkObject){setRefreshWorkObject(false);orderService.getDetails(orderId).then(res=>{setWorkObject(res.data);},err=>{if(err.response){if(err.response.status===404){setError("Order not found");}else{setError("".concat(err.response.data.Message.replace('workobject','order')," You're seeing this message because you made a change that affected this order's status."));}}else{setError(err);}setWorkObject(null);}).finally(()=>{setIsLoading(false);});getProductsCache().then(res=>{}).catch(err=>{console.log(err);});getProductShippingProfiles().then(res=>{}).catch(err=>{console.log(err);});}},[orderId,orderService,user,lookupService,productscache,refreshWorkObject,productshippingprofiles,getProductsCache,getProductShippingProfiles]);return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isLoading&&/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{variant:"dark"}),!isLoading&&workObject===null&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"alert alert-warning",role:"alert",children:error?/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:error}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Failed to locate order '",orderId,"' or you do not have permission to view this order."]})}),!isLoading&&workObject!==null&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(WorkObjectNav,{workObject:workObject,orderService:orderService,hasPermission:hasPermission,user:user,fetchWorkObject:()=>setRefreshWorkObject(true)}),/*#__PURE__*/(0,jsx_runtime.jsx)(StatusProgressBarComponent,{workObject:workObject.workObject}),/*#__PURE__*/(0,jsx_runtime.jsx)(WorkObjectDetails,{workObject:workObject.workObject}),/*#__PURE__*/(0,jsx_runtime.jsx)(OrderLineItems,{config:config,orderId:orderId,workObject:workObject,orderService:orderService,setIsLoading:setIsLoading,productsCache:productscache,productshippingprofiles:productshippingprofiles,fetchWorkObject:()=>setRefreshWorkObject(true)}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{children:[hasPermission('order:read')?/*#__PURE__*/(0,jsx_runtime.jsx)(OrderCustomerInformation,{workObject:workObject,orderService:orderService,fetchWorkObject:()=>setRefreshWorkObject(true),customer:workObject.workObject.metadata.customer,shippingAddress:workObject.workObject.metadata.shippingAddress}):null,/*#__PURE__*/(0,jsx_runtime.jsxs)(Col/* default */.Z,{md:6,sm:12,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"text-start mb-2",children:/*#__PURE__*/(0,jsx_runtime.jsx)("h4",{className:"mb-0 ms-1",children:"Comments/Activity"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.Z.Body,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Tabs/* default */.Z,{defaultActiveKey:"comments",id:"comments-activity-tabs",className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Tab/* default */.Z,{eventKey:"comments",title:"Comments",children:/*#__PURE__*/(0,jsx_runtime.jsx)(OrderCommentsComponent,{orderId:orderId,comments:workObject.comments,fetchWorkObject:()=>setRefreshWorkObject(true)})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Tab/* default */.Z,{eventKey:"activity",title:"Activity",children:/*#__PURE__*/(0,jsx_runtime.jsx)(order_activity_component,{activityData:workObject.audits})})]})})})]})]})]})]});}
;// CONCATENATED MODULE: ./src/components/distribution/distribution.component.js
function DistributionComponent(){const{distributionService,averageDailyOrderCaches,getUserById}=(0,react.useContext)(cache_context);const[distributionData,setDistributionData]=(0,react.useState)(null);const[userNames,setUserNames]=(0,react.useState)({});const[distributionType,setDistributionType]=(0,react.useState)('artfile');const[editingId,setEditingId]=(0,react.useState)(null);const[newDistribution,setNewDistribution]=(0,react.useState)("");const[totalDistributionCapacity,setTotalDistributionCapacity]=(0,react.useState)(0);const[totalAssignedOrders,setTotalAssignedOrders]=(0,react.useState)(0);const fetchDistribution=(0,react.useCallback)((type,averageDailyOrderCaches)=>{distributionService.getUsersCapacity(type,averageDailyOrderCaches).then(res=>{setDistributionData(res.data);const userNamesPromises=res.data.map(_ref=>{let{userId}=_ref;return getUserById(userId).then(userName=>[userId,userName]);});const totalDistribution=res.data.reduce((acc,cur)=>acc+cur.distribution,0);setTotalDistributionCapacity(totalDistribution);const totalAssigned=res.data.reduce((acc,cur)=>acc+cur.averageAssignedPerDay,0);setTotalAssignedOrders(totalAssigned);Promise.all(userNamesPromises).then(names=>{setUserNames(prev=>({...prev,...Object.fromEntries(names)}));});}).catch(err=>{console.log(err);});},[distributionService,getUserById]);(0,react.useEffect)(()=>{fetchDistribution('artfile',averageDailyOrderCaches);},[fetchDistribution,averageDailyOrderCaches]);const handleEditClick=(userId,currentDistribution)=>{setEditingId(userId);setNewDistribution(currentDistribution);};const handleSubmit=userId=>{distributionService.setUserDistribution(userId,distributionType,newDistribution).then(()=>{setEditingId(null);fetchDistribution(distributionType,averageDailyOrderCaches);}).catch(err=>{console.log(err);});};let capacityStatus='Healthy Capacity';let alertVariant='success';let capacityTooltip='Distribution is healthy';if(totalDistributionCapacity>totalAssignedOrders){capacityStatus='Over Capacity';alertVariant='danger';capacityTooltip='Distribution is over capacity some users will not get assigned order in a timely manner.';}else if(totalDistributionCapacity/totalAssignedOrders>=0.8){capacityStatus='Near Capacity';alertVariant='warning';capacityTooltip='Distribution is nearing capacity please adjust distribution to avoid over capacity and users not getting assigned orders in a timely manner.';}return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-center",children:[totalDistributionCapacity!==null&&/*#__PURE__*/(0,jsx_runtime.jsxs)("h6",{className:"me-2 mb-1 border p-1 rounded mb-md-0",children:["Daily distribution ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"badge bg-dark",children:totalDistributionCapacity})]}),totalAssignedOrders!==null&&/*#__PURE__*/(0,jsx_runtime.jsxs)("h6",{className:"me-2 mt-md-0 border p-1 rounded mb-1 mb-md-0",children:[" Daily average assigned orders ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"badge bg-dark",children:totalAssignedOrders})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"p-1",children:/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"right",overlay:/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"tooltip-top",children:capacityTooltip}),children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Alert/* default */.Z,{variant:alertVariant,className:"mb-0 ps-1 pe-1 pt-0 pb-0 fw-bold mt-md-0 distribution-alert",children:[capacityStatus," ",/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faCircleInfo */.DBf})]})})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{}),/*#__PURE__*/(0,jsx_runtime.jsx)(Row/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Col/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-content-start mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:distributionType==='artfile'?'dark':'light',className:"me-2",onClick:()=>{setDistributionType('artfile');fetchDistribution('artfile',averageDailyOrderCaches);},children:"Art File"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:distributionType==='printfile'?'dark':'light',onClick:()=>{setDistributionType('printfile');fetchDistribution('printfile',averageDailyOrderCaches);},children:"Print File"})]})})}),distributionData&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h5",{children:distributionType==='artfile'?'Art File Distribution':'Print File Distribution'}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Table/* default */.Z,{striped:true,bordered:true,hover:true,className:"rounded-table",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("thead",{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("tr",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"User"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Distribution"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Orders Per Day"})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("tbody",{children:distributionData.map(user=>/*#__PURE__*/(0,jsx_runtime.jsxs)("tr",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:userNames[user.userId]}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:editingId===user.userId?/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",value:newDistribution,onChange:e=>setNewDistribution(e.target.value)}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark btn-sm",className:"ms-2",onClick:()=>handleSubmit(user.userId),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{size:"sm",icon:free_solid_svg_icons/* faSave */.r6l})})]}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[user.distribution,/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{onClick:()=>handleEditClick(user.userId,user.distribution),variant:"dark btn-sm",className:"ms-2",children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{size:"sm",icon:free_solid_svg_icons/* faEdit */.Xcf})})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:user.averageAssignedPerDay})]},user.userId))})]})]})]});}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/ToggleButtonGroup.js + 1 modules
var ToggleButtonGroup = __webpack_require__(7969);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/ToggleButton.js
var ToggleButton = __webpack_require__(2228);
;// CONCATENATED MODULE: ./src/components/bulkupload/bulk.upload.component.js
function BulkUploadComponent(){const{attachmentService}=(0,react.useContext)(cache_context);const{hasPermission}=(0,react.useContext)(auth_context);const[showModal,setShowModal]=(0,react.useState)(false);const[uploadedFiles,setUploadedFiles]=(0,react.useState)([]);const[uploadStatus,setUploadStatus]=(0,react.useState)({});const[isOver,setIsOver]=(0,react.useState)(false);const[isUploadComplete,setIsUploadComplete]=(0,react.useState)(false);const[isUploading,setIsUploading]=(0,react.useState)(false);const[totalFiles,setTotalFiles]=(0,react.useState)(0);const[totalFailed,setTotalFailed]=(0,react.useState)(0);const[totalSucceeded,setTotalSucceeded]=(0,react.useState)(0);const[startTime,setStartTime]=(0,react.useState)(null);const[elapsedTime,setElapsedTime]=(0,react.useState)('');const isArtFileDesigner=hasPermission('image_artfile:write');const isPrintFileDesigner=hasPermission('image_printfile:write');const initialFileType=isArtFileDesigner?'artfile':isPrintFileDesigner?'printfile':null;const[fileType,setFileType]=(0,react.useState)(initialFileType);const inputFileRef=(0,react.useRef)();const handleOpenModal=()=>setShowModal(true);const handleCloseModal=()=>{setUploadedFiles([]);setUploadStatus({});setShowModal(false);setIsUploadComplete(false);setStartTime(null);setElapsedTime('');};const openFilePicker=()=>{inputFileRef.current.click();};const handleDragOver=e=>{e.preventDefault();setIsOver(true);};const handleDragLeave=()=>{setIsOver(false);};const traverseFileTree=async function(item){let path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";return new Promise(resolve=>{if(item.isFile){item.file(file=>{file.fullPath=path+file.name;resolve(file);});}else if(item.isDirectory){const dirReader=item.createReader();dirReader.readEntries(async entries=>{const files=[];for(const entry of entries){const fullPath="".concat(path).concat(entry.name,"/");const file=await traverseFileTree(entry,fullPath);files.push(file);}resolve(files.flat());});}});};const handleDrop=async e=>{e.preventDefault();setIsOver(false);const items=e.dataTransfer.items;let allEntries=[];for(const item of items){const entry=item.webkitGetAsEntry?item.webkitGetAsEntry():null;if(entry){allEntries.push(entry);}else if(item.kind==='file'){allEntries.push(item.getAsFile());}}let files=[];for(const entry of allEntries){if(entry.isFile||entry instanceof File){if(entry instanceof File){files.push(entry);}else{const promise=new Promise(resolve=>{entry.file(file=>{resolve(file);});});const file=await promise;files.push(file);}}else if(entry.isDirectory){const folderFiles=await traverseFileTree(entry);files=[...files,...folderFiles];}}files=files.filter(file=>file.type==="image/jpeg"||file.type==="image/png");handleUploadFiles(files);};const handleUploadFiles=files=>{const uploaded=[...uploadedFiles,...files];setUploadedFiles(uploaded);setTotalFiles(uploaded.length);};const exportFileList=()=>{const now=new Date();const formattedDate="".concat(now.getMonth()+1,"-").concat(now.getDate(),"-").concat(now.getFullYear(),"-").concat(now.getHours(),"-").concat(now.getMinutes(),"-bulk-upload-report.csv");const csvContent='data:text/csv;charset=utf-8,'+'File Name,Status,Error Message,Timestamp\n'+Object.keys(uploadStatus).map(key=>"".concat(key,",").concat(uploadStatus[key].status,",").concat(uploadStatus[key].message||'',",").concat(uploadStatus[key].timestamp||'')).join('\n');const encodedUri=encodeURI(csvContent);const link=document.createElement('a');link.setAttribute('href',encodedUri);link.setAttribute('download',formattedDate);link.click();};(0,react.useEffect)(()=>{let timer;if(isUploading&&startTime){timer=setInterval(()=>{const now=new Date();const diffInSeconds=Math.floor((now-startTime)/1000);const minutes=Math.floor(diffInSeconds/60);const seconds=diffInSeconds%60;setElapsedTime("".concat(minutes?"".concat(minutes," minutes"):''," ").concat(seconds," seconds"));},1000);}else if(!isUploading&&startTime){clearInterval(timer);}return()=>{if(timer){clearInterval(timer);}};},[isUploading,startTime]);const handleConfirmedUploads=async()=>{setIsUploading(true);setStartTime(new Date());for(const file of uploadedFiles){const timestamp=new Date();const formattedTime="".concat(timestamp.getMonth()+1,"/").concat(timestamp.getDate(),"/").concat(timestamp.getFullYear()," - ").concat(timestamp.getHours()%12||12,":").concat(String(timestamp.getMinutes()).padStart(2,'0')," ").concat(timestamp.getHours()>=12?'PM':'AM'," EST");try{await attachmentService.bulkUploadAttachment(file,fileType);setUploadStatus(prev=>({...prev,[file.name]:{status:'success',message:'',timestamp:formattedTime}}));setTotalSucceeded(prev=>prev+1);}catch(error){var _error$response$data$,_error$response,_error$response$data;const errorMessage=(_error$response$data$=error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.Message)!==null&&_error$response$data$!==void 0?_error$response$data$:'Unknown error';setUploadStatus(prev=>({...prev,[file.name]:{status:'failure',message:errorMessage,timestamp:formattedTime}}));setTotalFailed(prev=>prev+1);}}setIsUploadComplete(true);setIsUploading(false);};const progress=totalFiles?totalSucceeded/totalFiles*100:0;return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(isArtFileDesigner||isPrintFileDesigner)&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"rounded-circle bulk-upload-button btn-brand shadow ",onClick:handleOpenModal,children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faCloudUpload */.KN3})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:showModal,onHide:handleCloseModal,size:"xl",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Bulk Upload"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"text-center mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(ToggleButtonGroup/* default */.Z,{type:"radio",name:"fileType",size:"sm",defaultValue:fileType,onChange:val=>setFileType(val),children:[isArtFileDesigner&&/*#__PURE__*/(0,jsx_runtime.jsx)(ToggleButton/* default */.Z,{id:"tbg-artfile",value:"artfile",variant:fileType==='artfile'?'dark':'light',children:"Art File"}),isPrintFileDesigner&&/*#__PURE__*/(0,jsx_runtime.jsx)(ToggleButton/* default */.Z,{id:"tbg-printfile",value:"printfile",variant:fileType==='printfile'?'dark':'light',children:"Print File"})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mt-2",children:["You're uploading ",/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"bg-secondary",children:fileType}),/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-dark ms-2",children:["Total Files: ",totalFiles]})," |",/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-danger ms-2",children:["Failed: ",totalFailed]})," |",/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{className:"bg-success ms-2",children:["Succeeded: ",totalSucceeded]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(ProgressBar/* default */.Z,{variant:"success",now:progress,label:"".concat(Math.round(progress),"%"),className:"mt-3"}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mt-2",children:elapsedTime&&"Elapsed Time: ".concat(elapsedTime)})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"bulkuploader rounded ".concat(isOver?'over':''),onDragOver:handleDragOver,onDragLeave:handleDragLeave,onDrop:handleDrop,children:isOver?'Release to drop files':'Drag & Drop Files Here'}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"text-center mt-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"or"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"outline-dark",className:"mt-2",onClick:openFilePicker,children:"Select Files"})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("input",{ref:inputFileRef,id:"fileUpload",type:"file",multiple:true,accept:"image/jpeg, image/png",onChange:e=>handleUploadFiles(Array.from(e.target.files)),style:{display:'none'}}),uploadedFiles.length>0&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"uploaded-files-list mt-2 text-center bg-light border border-secondary rounded pb-0 shadow-sm",style:{maxHeight:'400px',overflowY:'auto'},children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mt-3 mb-0",children:"Files to be uploaded:"}),/*#__PURE__*/(0,jsx_runtime.jsx)("hr",{}),uploadedFiles.map(file=>{var _uploadStatus$file$na,_uploadStatus$file$na2,_uploadStatus$file$na3,_uploadStatus$file$na4,_uploadStatus$file$na5,_uploadStatus$file$na6,_uploadStatus$file$na7;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[file.name," -",/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{className:"ms-1 ".concat(((_uploadStatus$file$na=uploadStatus[file.name])===null||_uploadStatus$file$na===void 0?void 0:_uploadStatus$file$na.status)==='success'?'bg-success':((_uploadStatus$file$na2=uploadStatus[file.name])===null||_uploadStatus$file$na2===void 0?void 0:_uploadStatus$file$na2.status)==='failure'?'bg-danger':'bg-warning'),children:((_uploadStatus$file$na3=uploadStatus[file.name])===null||_uploadStatus$file$na3===void 0?void 0:_uploadStatus$file$na3.status)||'pending'}),((_uploadStatus$file$na4=uploadStatus[file.name])===null||_uploadStatus$file$na4===void 0?void 0:_uploadStatus$file$na4.timestamp)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"text-muted ms-2",children:["(",(_uploadStatus$file$na5=uploadStatus[file.name])===null||_uploadStatus$file$na5===void 0?void 0:_uploadStatus$file$na5.timestamp,")"]}),((_uploadStatus$file$na6=uploadStatus[file.name])===null||_uploadStatus$file$na6===void 0?void 0:_uploadStatus$file$na6.status)==='failure'&&/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"text-danger ms-2",children:["(",(_uploadStatus$file$na7=uploadStatus[file.name])===null||_uploadStatus$file$na7===void 0?void 0:_uploadStatus$file$na7.message,")"]})]},file.name);}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"sticky-bottom text-center mt-3 mb-0 w-100",children:isUploadComplete?/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",className:"shadow-sm w-100 rounded-0",onClick:exportFileList,children:"Export List"}):/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"dark",className:"shadow-sm w-100 rounded-0",onClick:handleConfirmedUploads,children:isUploading?/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{variant:"light"}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faCloudUpload */.KN3})," Confirm and Upload"]})})})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Footer,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",className:"shadow",onClick:handleCloseModal,children:"Close"})})]})]})});}
;// CONCATENATED MODULE: ./src/components/skulookup/editskumodal.component.js
function EditSkuModal(_ref){let{show,handleClose,sku,handleEditChange,updateSku,productshippingprofiles,errorMessage,handleIgnoreSku}=_ref;const[showConfirmation,setShowConfirmation]=(0,react.useState)(false);const handleIgnoreClick=()=>{setShowConfirmation(true);};const handleConfirmIgnore=()=>{setShowConfirmation(false);handleIgnoreSku();};const handleCancelIgnore=()=>{setShowConfirmation(false);};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:show,onHide:handleClose,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Edit SKU"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[errorMessage&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-danger me-auto",children:errorMessage}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Title"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"title",value:sku.title,onChange:handleEditChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Handle"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"handle",value:sku.handle.replace(/\s/g,'-'),onChange:handleEditChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Option 1"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"option1",value:sku.option1,onChange:handleEditChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Option 2"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"option2",value:sku.option2,onChange:handleEditChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Option 3"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"option3",value:sku.option3,onChange:handleEditChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Sensaria PID"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"number",name:"sensariaProductId",value:sku.sensariaProductId||'',onChange:handleEditChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Shipping Method"}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Select,{name:"shippingMethod",value:sku.shippingMethod||'',onChange:handleEditChange,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:null,children:"NONE"}),productshippingprofiles.map(profile=>/*#__PURE__*/(0,jsx_runtime.jsxs)("option",{value:profile.id,children:[profile.method," (",profile.id,")"]},profile.id))]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Artfile Needed"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Check,{type:"checkbox",name:"artfileNeeded",checked:sku.artfileNeeded,onChange:handleEditChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"File Type"}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Select,{name:"fileType",value:sku.fileType||'',onChange:handleEditChange,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:null,children:"NONE"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:".jpg",children:".jpg"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:".png",children:".png"})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Number of CX Images"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"number",name:"numberOfCxImages",value:sku.numberOfCxImages||0,onChange:handleEditChange})]})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Footer,{children:[errorMessage&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-danger me-auto",children:errorMessage}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:handleClose,children:"Close"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn-brand",onClick:updateSku,children:"Save Changes"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"danger",onClick:handleIgnoreClick,children:"Ignore SKU"})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:showConfirmation,onHide:handleCancelIgnore,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,className:"bg-danger text-white",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Confirm Ignore SKU"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Body,{className:"bg-danger text-white",children:/*#__PURE__*/(0,jsx_runtime.jsx)("p",{children:"This action can affect many orders. Are you sure you want to ignore this SKU?"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Footer,{className:"bg-danger text-white",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:handleCancelIgnore,children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"danger",className:"border border-white",onClick:handleConfirmIgnore,children:"Confirm Ignore"})]})]})]});}
;// CONCATENATED MODULE: ./src/components/skulookup/deleteskumodal.component.js
function DeleteSkuModal(_ref){let{show,handleClose,sku,deleteSku,deletionStatus,deletionMessage,errorMessage}=_ref;return/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:show,onHide:handleClose,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Delete SKU"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[errorMessage&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-danger me-auto",children:errorMessage}),sku&&!deletionStatus&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{children:["Are you sure you want to delete the SKU: ",/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{pill:true,bg:"dark",children:sku.variantSku})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Title:"})," ",sku.title]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Handle:"})," ",sku.handle]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Option 1:"})," ",sku.option1]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Option 2:"})," ",sku.option2]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Option 3:"})," ",sku.option3]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Variant SKU:"})," ",sku.variantSku]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Sensaria PID:"})," ",sku.sensariaProductId]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Ship Method:"})," ",sku.shippingMethod]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Artfile Needed:"})," ",sku.artfileNeeded?"Yes":"No"]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"Type:"})," ",sku.fileType]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(ListGroup/* default */.Z.Item,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("strong",{children:"# of CX Images:"})," ",sku.numberOfCxImages]})]})]}),deletionStatus==='success'&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-success",children:deletionMessage}),deletionStatus==='error'&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-danger",children:deletionMessage})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Footer,{children:[errorMessage&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-danger me-auto",children:errorMessage}),deletionStatus?/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:handleClose,children:"Close"}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:handleClose,children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"danger",onClick:deleteSku,children:"Delete"})]})]})]});}
;// CONCATENATED MODULE: ./src/components/skulookup/createskumodal.component.js
function CreateSkuModal(_ref){let{show,handleClose,newSku,setNewSku,createSku,productshippingprofiles,errorMessage}=_ref;const handleChange=e=>{const{name,value,type,checked}=e.target;if(name==="handle"){setNewSku(prevState=>({...prevState,[name]:value.replace(/\s/g,'-')}));}else if(type==='number'){setNewSku(prevState=>({...prevState,[name]:parseInt(value)||0}));}else if(type==='checkbox'){setNewSku(prevState=>({...prevState,[name]:checked}));}else{setNewSku(prevState=>({...prevState,[name]:value}));}};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z,{show:show,onHide:handleClose,size:"lg",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Header,{closeButton:true,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Modal/* default */.Z.Title,{children:"Create New SKU"})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Body,{children:[errorMessage&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-danger",children:errorMessage}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Title"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"title",value:newSku.title,onChange:handleChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Handle"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"handle",value:newSku.handle.replace(/\s/g,'-'),onChange:handleChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Option 1"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"option1",value:newSku.option1,onChange:handleChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Option 2"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"option2",value:newSku.option2,onChange:handleChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Option 3"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"option3",value:newSku.option3,onChange:handleChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Variant SKU"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",name:"variantSku",value:newSku.variantSku,onChange:handleChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Sensaria PID"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"number",name:"sensariaProductId",value:newSku.sensariaProductId||'',onChange:handleChange})]}),productshippingprofiles&&/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Shipping Method"}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Select,{name:"shippingMethod",value:newSku.shippingMethod,onChange:handleChange,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:null,children:"NONE"}),productshippingprofiles.map(profile=>/*#__PURE__*/(0,jsx_runtime.jsxs)("option",{value:profile.id,children:[profile.method," (",profile.id,")"]},profile.id))]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Artfile Needed"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Check,{type:"checkbox",name:"artfileNeeded",checked:newSku.artfileNeeded,onChange:handleChange})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"Type"}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Select,{name:"fileType",value:newSku.fileType,onChange:handleChange,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:null,children:"NONE"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:".jpg",children:".jpg"}),/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:".png",children:".png"})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Form/* default */.Z.Group,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Label,{children:"# of CX Images"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"number",name:"numberOfCxImages",value:newSku.numberOfCxImages||0,onChange:handleChange})]})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(Modal/* default */.Z.Footer,{children:[errorMessage&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"text-danger me-auto",children:errorMessage}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",onClick:handleClose,children:"Close"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn-brand",onClick:createSku,disabled:!newSku.title||!newSku.handle||!newSku.variantSku||!newSku.option1,children:"Submit"})]})]});}
;// CONCATENATED MODULE: ./src/components/skulookup/skulookup.component.js
// Import useLocation and useNavigate from react-router-dom
function SkuLookUpComponent(){var _location$state;const{lookupService,getProductShippingProfiles,productshippingprofiles}=(0,react.useContext)(cache_context);const[skuList,setSkuList]=(0,react.useState)([]);const[searchQuery,setSearchQuery]=(0,react.useState)("");const[filteredSkuList,setFilteredSkuList]=(0,react.useState)([]);const[isLoading,setIsLoading]=(0,react.useState)(false);const[isError,setIsError]=(0,react.useState)(false);const[error,setError]=(0,react.useState)("");const[errorMessage,setErrorMessage]=(0,react.useState)("");const[showEditModal,setShowEditModal]=(0,react.useState)(false);const[showDeleteModal,setShowDeleteModal]=(0,react.useState)(false);const[deletionStatus,setDeletionStatus]=(0,react.useState)(null);const[deletionMessage,setDeletionMessage]=(0,react.useState)("");const[showCreateModal,setShowCreateModal]=(0,react.useState)(false);const[selectedSku,setSelectedSku]=(0,react.useState)(null);const[newSku,setNewSku]=(0,react.useState)({title:"",handle:"",option1:"",option2:"",option3:"",variantSku:"",sensariaProductId:null,shippingMethod:null,artfileNeeded:false,fileType:null,numberOfCxImages:0});const[editedSku,setEditedSku]=(0,react.useState)({title:"",handle:"",option1:"",option2:"",option3:"",sensariaProductId:null,shippingMethod:null,artfileNeeded:false,fileType:null,numberOfCxImages:0});const[showOnlyMisconfigured,setShowOnlyMisconfigured]=(0,react.useState)(false);// State for showing only misconfigured SKUs
const location=(0,dist/* useLocation */.TH)();// Use useLocation to get the current location
const navigate=(0,dist/* useNavigate */.s0)();// Use useNavigate to navigate programmatically
(0,react.useEffect)(()=>{setIsLoading(true);lookupService.getProducts().then(productsRes=>{setSkuList(productsRes.data);setFilteredSkuList(productsRes.data);setError("");const queryParams=new URLSearchParams(location.search);const editSku=queryParams.get('edit');const newSku=queryParams.get('new');if(editSku){const skuToEdit=productsRes.data.find(sku=>sku.variantSku===editSku);if(skuToEdit){openEditModal(skuToEdit);}}if(newSku){// auto fill the variant sku field with the new sku
setNewSku(prevState=>({...prevState,variantSku:newSku}));setShowCreateModal(true);}}).catch(err=>{setIsError(true);setError(err.message);}).finally(()=>{setIsLoading(false);});getProductShippingProfiles().then(res=>{console.log(res);}).catch(err=>{console.log(err);});},[lookupService,getProductShippingProfiles,location]);const renderTooltip=(props,text)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Tooltip/* default */.Z,{id:"button-tooltip",...props,children:text});const handleSearch=event=>{const query=event.target.value;setSearchQuery(query);const filtered=query?skuList.filter(sku=>sku.variantSku.toLowerCase().includes(query.toLowerCase())):skuList;setFilteredSkuList(filtered);};const openEditModal=sku=>{setSelectedSku(sku);setEditedSku({...sku});setShowEditModal(true);};const closeEditModal=()=>{setSelectedSku(null);setShowEditModal(false);};const handleEditChange=e=>{const{name,value,type,checked}=e.target;if(type==='checkbox'){setEditedSku(prevState=>({...prevState,[name]:checked}));}else if(type==='number'){setEditedSku(prevState=>({...prevState,[name]:parseInt(value)||0}));}else{setEditedSku(prevState=>({...prevState,[name]:value}));}};const openDeleteModal=sku=>{setSelectedSku(sku);setShowDeleteModal(true);};const closeDeleteModal=()=>{setSelectedSku(null);setShowDeleteModal(false);setDeletionStatus(null);setDeletionMessage("");};const openCreateModal=()=>{setShowCreateModal(true);};const closeCreateModal=()=>{setShowCreateModal(false);};const updateSku=()=>{lookupService.updateProduct(selectedSku.variantSku,editedSku).then(()=>{const updatedSkus=skuList.map(sku=>sku.variantSku===editedSku.variantSku?editedSku:sku);setSkuList(updatedSkus);setFilteredSkuList(updatedSkus);closeEditModal();setErrorMessage("");}).catch(err=>{console.error("Error updating SKU:",err);setErrorMessage(err.response.data.Message);});};const deleteSku=()=>{if(selectedSku){lookupService.deleteProduct(selectedSku.variantSku).then(()=>{setDeletionStatus('success');setDeletionMessage("SKU ".concat(selectedSku.variantSku," deleted successfully."));const updatedSkuList=skuList.filter(sku=>sku.variantSku!==selectedSku.variantSku);setSkuList(updatedSkuList);const updatedFilteredSkuList=filteredSkuList.filter(sku=>sku.variantSku!==selectedSku.variantSku);setFilteredSkuList(updatedFilteredSkuList);setErrorMessage("");}).catch(err=>{setDeletionStatus('error');setErrorMessage(err.response.data.Message);setDeletionMessage("Failed to delete SKU: ".concat(err.message));});}};const createSku=()=>{lookupService.createProduct(newSku).then(response=>{const updatedSkuList=skuList.concat(response.data);setFilteredSkuList(updatedSkuList);//clear the form fields
setNewSku({title:"",handle:"",option1:"",option2:"",option3:"",variantSku:"",sensariaProductId:null,shippingMethod:null,artfileNeeded:false,fileType:"",numberOfCxImages:0});closeCreateModal();setErrorMessage("");}).catch(err=>{setErrorMessage(err.response.data.Message);console.log(err);});};const handleBackClick=()=>{const state=location.state;if(state&&state.from){navigate(state.from);}else{navigate(-1);// fallback to browser back if state is not available
}};const isFileTypeMisconfigured=fileType=>{return['.png','.jpg','.jpeg'].includes(fileType);};const misconfiguredSkusCount=filteredSkuList.filter(sku=>{return(!sku.sensariaProductId||!sku.shippingMethod)&&(sku.artfileNeeded||isFileTypeMisconfigured(sku.fileType)||sku.numberOfCxImages>0);}).length;const handleFilterMisconfigured=()=>{setShowOnlyMisconfigured(prevState=>!prevState);};const displayList=showOnlyMisconfigured?filteredSkuList.filter(sku=>{return(!sku.sensariaProductId||!sku.shippingMethod)&&(sku.artfileNeeded||isFileTypeMisconfigured(sku.fileType)||sku.numberOfCxImages>0);}):filteredSkuList;if(isLoading||!productshippingprofiles){return/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{size:"lg",message:"Loading skus...",variant:"dark"});}if(isError){return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:["Error: ",error]});}//function for button handleIgnoreSku that sets the shippingProfile to NONe, artfileNeeded false, fileType NONE and numberOfCxImages to 0
const handleIgnoreSku=sku=>{const ignoredSku={...sku,shippingMethod:'None',artfileNeeded:false,fileType:'None',numberOfCxImages:0};lookupService.updateProduct(sku.variantSku,ignoredSku).then(()=>{const updatedSkus=skuList.map(sku=>sku.variantSku===ignoredSku.variantSku?ignoredSku:sku);setSkuList(updatedSkus);setFilteredSkuList(updatedSkus);setErrorMessage("");closeEditModal();}).catch(err=>{console.error("Error updating SKU:",err);setErrorMessage(err.response.data.Message);});};return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.from)&&/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{className:"btn-brand btn-sm mb-2",onClick:handleBackClick,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faArrowCircleLeft */.OFe,className:"text-white me-2"}),"Back"]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(InputGroup/* default */.Z,{className:"mb-3 sku-sticky-top shadow-sm",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Form/* default */.Z.Control,{type:"text",placeholder:"Start typing to search by SKU...",value:searchQuery,onChange:handleSearch}),/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>renderTooltip(props,'Create New SKU'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"",onClick:openCreateModal,className:"btn-brand",children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faCirclePlus */.EQ8,className:"text-white"})})})]}),misconfiguredSkusCount>0&&/*#__PURE__*/(0,jsx_runtime.jsxs)(Alert/* default */.Z,{variant:"warning",children:["Detected ",misconfiguredSkusCount," SKU(s) that may be misconfigured.",/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"btn btn-brand btn-sm ms-2",onClick:handleFilterMisconfigured,children:showOnlyMisconfigured?'Show All SKUs':'Show Misconfigured SKUs'})]}),displayList&&/*#__PURE__*/(0,jsx_runtime.jsxs)(Table/* default */.Z,{bordered:true,hover:true,className:"rounded-table",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("thead",{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("tr",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Info"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Title"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Option 1"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Option 2"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Option 3"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Variant SKU"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Sensaria PID"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Ship Method"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Artfile Needed"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Type"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"# of CX Images"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Actions"})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("tbody",{children:displayList.map(sku=>/*#__PURE__*/(0,jsx_runtime.jsxs)("tr",{className:(!sku.sensariaProductId||!sku.shippingMethod)&&(sku.artfileNeeded||isFileTypeMisconfigured(sku.fileType)||sku.numberOfCxImages>0)?'table-danger':'',children:[/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle text-center",children:(!sku.sensariaProductId||!sku.shippingMethod)&&(sku.artfileNeeded||isFileTypeMisconfigured(sku.fileType)||sku.numberOfCxImages>0)?/*#__PURE__*/(0,jsx_runtime.jsx)(OverlayTrigger/* default */.Z,{placement:"top",overlay:props=>{let missing=[];let set=[];if(!sku.sensariaProductId)missing.push("Sensaria Product ID");if(!sku.shippingMethod)missing.push("Shipping Method");if(sku.artfileNeeded)set.push("Artfile Needed");if(isFileTypeMisconfigured(sku.fileType))set.push("File Type");if(sku.numberOfCxImages>0)set.push("Number of CX Images");let message="This SKU may be set incorrectly. You have set ".concat(set.join(", ")," without setting ").concat(missing.join(", "),".");return renderTooltip(props,message);},children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faExclamationCircle */.RLE,className:"text-danger"})}):/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faCircleCheck */.fV7,className:"text-success"})}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"text-truncate align-middle",style:{maxWidth:'200px'},title:sku.title,children:sku.title}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.option1}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.option2}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.option3}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.variantSku}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.sensariaProductId}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.shippingMethod}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.artfileNeeded?"Yes":"No"}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.fileType}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{className:"align-middle",children:sku.numberOfCxImages}),/*#__PURE__*/(0,jsx_runtime.jsxs)("td",{className:"text-end d-flex align-middle",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"secondary",className:"me-1",size:"sm",onClick:()=>openEditModal(sku),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faEdit */.Xcf,className:"text-white"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"danger",className:"me-1",size:"sm",onClick:()=>openDeleteModal(sku),children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faTrash */.$aW,className:"text-white"})})]})]},sku.variantSku))})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(EditSkuModal,{show:showEditModal,handleClose:closeEditModal,sku:editedSku,handleEditChange:handleEditChange,updateSku:updateSku,errorMessage:errorMessage,productshippingprofiles:productshippingprofiles,handleIgnoreSku:()=>handleIgnoreSku(editedSku)}),/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteSkuModal,{show:showDeleteModal,handleClose:closeDeleteModal,sku:selectedSku,deleteSku:deleteSku,deletionStatus:deletionStatus,errorMessage:errorMessage,deletionMessage:deletionMessage}),/*#__PURE__*/(0,jsx_runtime.jsx)(CreateSkuModal,{show:showCreateModal,handleClose:closeCreateModal,newSku:newSku,setNewSku:setNewSku,createSku:createSku,errorMessage:errorMessage,productshippingprofiles:productshippingprofiles})]});}
// EXTERNAL MODULE: ./node_modules/chart.js/auto/auto.js
var auto = __webpack_require__(6342);
// EXTERNAL MODULE: ./node_modules/react-chartjs-2/dist/index.js
var react_chartjs_2_dist = __webpack_require__(3798);
;// CONCATENATED MODULE: ./src/components/shared/chart.component.js
function ChartComponent(_ref){let{chart}=_ref;const name=chart===null||chart===void 0?void 0:chart.name;const kind=chart===null||chart===void 0?void 0:chart.kind;const data=chart===null||chart===void 0?void 0:chart.data;console.log(chart);const RenderChart=()=>{var _data$value;if(data===null||data===undefined){return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{});}switch(kind){case 10:// Pie Chart
return/*#__PURE__*/(0,jsx_runtime.jsx)(react_chartjs_2_dist/* Pie */.by,{data:getChartData(data),options:{legend:{display:window.innerWidth>500,position:'right',align:'center'}}});case 11:// Bar Chart
return/*#__PURE__*/(0,jsx_runtime.jsx)(react_chartjs_2_dist/* Bar */.$Q,{data:getChartData(data)});case 12:// Line Chart
return/*#__PURE__*/(0,jsx_runtime.jsx)(react_chartjs_2_dist/* Line */.x1,{data:getChartData(data)});case 13:// Polaris
return/*#__PURE__*/(0,jsx_runtime.jsx)(react_chartjs_2_dist/* PolarArea */.xz,{data:getChartData(data),options:{legend:{display:window.innerWidth>500,position:'right',align:'center'}}});case 20:return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Table"});case 21:// Data card (text only)
return/*#__PURE__*/(0,jsx_runtime.jsxs)(Badge/* default */.Z,{pill:true,bg:"secondary",children:[" ",(_data$value=data.value)===null||_data$value===void 0?void 0:_data$value.toLocaleString()]});default:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{children:"Unsupported chart type."});}};const getSize=kind=>{switch(kind){case 21:return 2;default:return 6;}};const getChartData=res=>{if(res){const colors=getBootstrapColors();const dataSets=[];var yAxisLabels=[];// Get name of series
for(var series in res){console.log(series);const data=res[series];dataSets.push({label:series,data:data.map(d=>d.count),borderColor:kind===12||kind===11?colors[0]:colors,borderWidth:kind===12?4:1,pointBackgroundColor:colors[0],backgroundColor:kind===12||kind===11?getTransparentColorSet(colors[0]):getBgColors(),hoverBackgroundColor:kind===11?colors[0]:getBootstrapColors()});yAxisLabels=data.map(d=>d.label);}console.log(dataSets);return{labels:yAxisLabels,datasets:dataSets};}};const getTransparentColorSet=c=>{let color=c;if(c.length===7)color=c+'55';else if(c.length===4)color=c+c.substring(1)+'55';return color;};const getBgColors=()=>{const colors=getBootstrapColors();for(let i=0;i<colors.length;i++){colors[i]=getTransparentColorSet(colors[i]);}return colors;};const getBootstrapColors=()=>{const style=getComputedStyle(document.body);const color=["#f19a3e","#659157","#00b4d8","#d88c9a","#8e7dbe"];color.push(style.getPropertyValue('--success'));color.push(style.getPropertyValue('--warning'));color.push(style.getPropertyValue('--danger'));color.push(style.getPropertyValue('--light'));color.push(style.getPropertyValue('--info'));color.push(style.getPropertyValue('--secondary'));color.push(style.getPropertyValue('--dark'));return color;};if(name===undefined||name===null||kind===undefined||kind===null||data===undefined||data===null){return/*#__PURE__*/(0,jsx_runtime.jsx)("p",{children:"Error loading chart data."});}else{return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Col/* default */.Z,{sm:12,lg:getSize(kind),className:"mb-3",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.Z,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Card/* default */.Z.Body,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.Z.Title,{className:"text-center",children:name}),/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.Z.Body,{className:"text-center",children:/*#__PURE__*/(0,jsx_runtime.jsx)(RenderChart,{})})]})})})});}}
;// CONCATENATED MODULE: ./src/components/dashboard/dashboard.table.row.component.js
function DashboardTableRowComponent(_ref){var _item$metadata,_item$metadata$custom,_item$metadata2,_item$metadata2$custo,_item$metadata3,_item$metadata3$custo,_item$metadata4,_item$metadata4$lineI;let{item}=_ref;const{hasPermission}=(0,react.useContext)(auth_context);const{config}=(0,react.useContext)(config_context);return/*#__PURE__*/(0,jsx_runtime.jsxs)("tr",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{pill:true,bg:"secondary",style:{cursor:'pointer'},children:item.orderName})}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(StatusBadgeComponent,{status:item.status})}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:item.shopifyOrderId}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:(_item$metadata=item.metadata)===null||_item$metadata===void 0?void 0:(_item$metadata$custom=_item$metadata.customer)===null||_item$metadata$custom===void 0?void 0:_item$metadata$custom.FirstName}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:(_item$metadata2=item.metadata)===null||_item$metadata2===void 0?void 0:(_item$metadata2$custo=_item$metadata2.customer)===null||_item$metadata2$custo===void 0?void 0:_item$metadata2$custo.LastName}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:(_item$metadata3=item.metadata)===null||_item$metadata3===void 0?void 0:(_item$metadata3$custo=_item$metadata3.customer)===null||_item$metadata3$custo===void 0?void 0:_item$metadata3$custo.Email}),/*#__PURE__*/(0,jsx_runtime.jsx)("td",{children:(_item$metadata4=item.metadata)===null||_item$metadata4===void 0?void 0:(_item$metadata4$lineI=_item$metadata4.lineItems)===null||_item$metadata4$lineI===void 0?void 0:_item$metadata4$lineI.map(lineItem=>{var _lineItem$LineItem;return/*#__PURE__*/(0,jsx_runtime.jsx)(Badge/* default */.Z,{pill:true,bg:"light border text-dark",className:"me-1",size:"sm",children:lineItem===null||lineItem===void 0?void 0:(_lineItem$LineItem=lineItem.LineItem)===null||_lineItem$LineItem===void 0?void 0:_lineItem$LineItem.Name},lineItem.id);})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("td",{className:"d-flex align-items-center",style:{height:'4.1em'},children:[/*#__PURE__*/(0,jsx_runtime.jsx)(react_router_dom_dist/* Link */.rU,{to:"/details/".concat(item.shopifyOrderId),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{variant:"",className:"me-1 btn-brand",size:"sm",children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faEdit */.Xcf})})}),hasPermission('user:write')?/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{href:"".concat(config.shopifyUrl,"/admin/orders/").concat(item.shopifyOrderId),rel:"noopener noreferrer",target:"_blank",variant:"success",className:"me-1 bg-shopify",size:"sm",children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_brands_svg_icons/* faShopify */.yvx})}):null]})]},"".concat(item.orderId,"-").concat(item.shopifyOrderId,"-").concat(item.lastModified));}
;// CONCATENATED MODULE: ./src/utils/getStartDate.js
function getStartDate(statusKey){const now=new Date();switch(statusKey){case"missingArtwork":return new Date(now-24*3600*1000).toISOString();// 24 hours ago
case"missingPrintfile":return new Date(now-72*3600*1000).toISOString();// 72 hours ago
case"completedToday":return new Date(now.setHours(0,0,0,0)).toISOString();// start of today
default:return new Date(0).toISOString();// default to epoch start
}}
;// CONCATENATED MODULE: ./src/components/dashboard/dashboard.table.component.js
/*
statuses
sensaria failure: 9004
missing artwork: 3 //orders that are 24 hours old
missing printfile: 4 orders that are 72 hours old
missing CX: 9003 
unknown sku: 9001

completed orders from today: 7 (start of day and to current point in time today)
*/function DashboardOrderTableComponent(){const{dashboardService}=(0,react.useContext)(cache_context);const[tableData,setTableData]=(0,react.useState)([]);const[key,setKey]=(0,react.useState)('missingArtwork');const[status,setStatus]=(0,react.useState)(3);const[page,setPage]=(0,react.useState)(1);const[pageSize,setPageSize]=(0,react.useState)(10);const[totalItems,setTotalItems]=(0,react.useState)(0);const statuses={"missingArtwork":3,"sensariaFailure":9004,"missingPrintfile":4,"missingCXImages":9003,"unknownSku":9001,"completedToday":7};(0,react.useEffect)(()=>{let payload={"page":page,"pageSize":pageSize,"status":[status],"createdOnStart":getStartDate(key),"createdOnEnd":new Date().toISOString(),"descendingOrder":true};if(dashboardService!==undefined){dashboardService.getOrdersByStatus(payload).then(res=>{setTableData(res.data.results);setTotalItems(res.data.totalItems);},err=>{console.error(err);});}},[page,pageSize,dashboardService,status,key]);const handleTabClick=statusKey=>{setKey(statusKey);setStatus(statuses[statusKey]);};return/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z,{fluid:true,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{className:"mb-3",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Tab/* default */.Z.Container,{id:"dashboard-tabs",defaultActiveKey:"missingArtwork",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Row/* default */.Z,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Col/* default */.Z,{sm:3,className:"p-2 bg-light rounded border border-muted sticky-top",style:{height:"max-content"},children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z,{variant:"pills",className:"flex-column",children:Object.keys(statuses).map(statusKey=>/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Item,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Nav/* default */.Z.Link,{eventKey:statusKey,onClick:()=>handleTabClick(statusKey),className:key===statusKey?"bg-brand":"text-muted",children:statusKey.replace(/([A-Z])/g,' $1').toUpperCase()})},statusKey))})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Col/* default */.Z,{sm:9,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Tab/* default */.Z.Content,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Tab/* default */.Z.Pane,{eventKey:key,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(Table/* default */.Z,{striped:true,bordered:true,hover:true,className:"rounded-table",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("thead",{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("tr",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Order #"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Status"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Shopify Order ID"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"First"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Last"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Email"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{children:"Products"}),/*#__PURE__*/(0,jsx_runtime.jsx)("th",{})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("tbody",{children:tableData.length>0?tableData.map(item=>/*#__PURE__*/(0,jsx_runtime.jsx)(DashboardTableRowComponent,{item:item},item.id)):/*#__PURE__*/(0,jsx_runtime.jsx)("tr",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("td",{colSpan:"100%",className:"text-center",children:"No data available"})})})]})})})})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)(PaginationComponent,{page:page,totalItems:totalItems,pageSize:pageSize,setPage:setPage,setPageSize:setPageSize})]})});}
;// CONCATENATED MODULE: ./src/components/dashboard/dashboard.home.component.js
function DashboardHomeComponent(){const{dashboardService}=(0,react.useContext)(cache_context);const[charts,setCharts]=(0,react.useState)([]);const[isLoading,setIsLoading]=(0,react.useState)(true);(0,react.useEffect)(()=>{setIsLoading(true);if(dashboardService!==undefined){dashboardService.getCharts().then(res=>{setCharts(res.data);console.log(res.data);},err=>{console.log(err);}).finally(()=>{setIsLoading(false);});}},[dashboardService]);if(isLoading){return/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingComponent,{size:"lg",variant:"dark"});}return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[charts===null||charts===void 0?void 0:charts.map((row,rowIndex)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Row/* default */.Z,{children:row.charts.map((chart,chartIndex)=>/*#__PURE__*/(0,jsx_runtime.jsx)(ChartComponent,{chart:chart},chartIndex))},rowIndex)),/*#__PURE__*/(0,jsx_runtime.jsx)(DashboardOrderTableComponent,{})]});}
;// CONCATENATED MODULE: ./src/components/shared/scrolltop.component.js
const ScrollTopComponent=()=>{const[isVisible,setIsVisible]=(0,react.useState)(false);const toggleVisibility=()=>{if(window.pageYOffset>300){setIsVisible(true);}else{setIsVisible(false);}};(0,react.useEffect)(()=>{window.addEventListener('scroll',toggleVisibility);return()=>{window.removeEventListener('scroll',toggleVisibility);};},[]);const scrollToTop=()=>{window.scrollTo({top:0,behavior:'smooth'});};return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:isVisible&&/*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.Z,{className:"scroll-top-button btn-brand shadow rounded-circle",variant:"primary",onClick:scrollToTop,children:/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faArrowAltCircleUp */.q9j})})});};/* harmony default export */ const scrolltop_component = (ScrollTopComponent);
;// CONCATENATED MODULE: ./src/components/shared/scrolldown.component.js
// Changed icon for downward arrow
const ScrollDownComponent=()=>{const[isVisible,setIsVisible]=(0,react.useState)(true);const toggleVisibility=()=>{if(window.pageYOffset<300){// Changed condition to show button when scrolled down
setIsVisible(true);}else{setIsVisible(false);}};(0,react.useEffect)(()=>{window.addEventListener('scroll',toggleVisibility);return()=>{window.removeEventListener('scroll',toggleVisibility);};},[]);const scrollToBottom=()=>{window.scrollTo({top:document.documentElement.scrollHeight,// Changed to scroll to the bottom
behavior:'smooth'});};return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:isVisible&&/*#__PURE__*/(0,jsx_runtime.jsxs)(Button/* default */.Z,{className:"scroll-top-button btn-brand shadow rounded-circle",variant:"primary",onClick:scrollToBottom,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faArrowAltCircleDown */.dEo})," "]})});};/* harmony default export */ const scrolldown_component = (ScrollDownComponent);
;// CONCATENATED MODULE: ./src/App.js
function App_App(){return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(ConfigContextProvider,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(AuthContextProvider,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)(CacheContextProvider,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(dist/* Routes */.Z5,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Route */.AW,{path:"/",element:/*#__PURE__*/(0,jsx_runtime.jsx)(protected_route,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(SearchComponent,{})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Route */.AW,{path:"/details/:orderId",element:/*#__PURE__*/(0,jsx_runtime.jsx)(protected_route,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(WorkObject,{})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Route */.AW,{path:"/distribution",element:/*#__PURE__*/(0,jsx_runtime.jsx)(protected_route,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(DistributionComponent,{})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Route */.AW,{path:"/skus",element:/*#__PURE__*/(0,jsx_runtime.jsx)(protected_route,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(SkuLookUpComponent,{})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Route */.AW,{path:"/dashboard",element:/*#__PURE__*/(0,jsx_runtime.jsx)(protected_route,{permission:'user:write',children:/*#__PURE__*/(0,jsx_runtime.jsx)(DashboardHomeComponent,{})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Route */.AW,{path:"/unauthorized",element:/*#__PURE__*/(0,jsx_runtime.jsx)(Unauthorized,{})}),/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Route */.AW,{path:"*",element:/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h1",{children:"404 - Page Not Found"}),/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* FontAwesomeIcon */.G,{icon:free_solid_svg_icons/* faWarning */.e7M,className:"text-warning",size:"6x"}),/*#__PURE__*/(0,jsx_runtime.jsx)("h5",{children:"The page you are trying to access does not exist. If this problem persists, please contact the site administrator for additional support."}),/*#__PURE__*/(0,jsx_runtime.jsxs)("h5",{children:["Click ",/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"/",children:"here"})," to return."]})]})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(scrolltop_component,{}),/*#__PURE__*/(0,jsx_runtime.jsx)(scrolldown_component,{}),/*#__PURE__*/(0,jsx_runtime.jsx)(BulkUploadComponent,{})]})})})});}/* harmony default export */ const src_App = (App_App);
;// CONCATENATED MODULE: ./src/reportWebVitals.js
const reportWebVitals=onPerfEntry=>{if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 216).then(__webpack_require__.bind(__webpack_require__, 3253)).then(_ref=>{let{getCLS,getFID,getFCP,getLCP,getTTFB}=_ref;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ const src_reportWebVitals = (reportWebVitals);
;// CONCATENATED MODULE: ./src/index.js
const root=client.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("link",{href:"/portal/ui/conf/style.css",rel:"stylesheet"}),/*#__PURE__*/(0,jsx_runtime.jsx)(react_router_dom_dist/* BrowserRouter */.VK,{basename:"/portal/ui",children:/*#__PURE__*/(0,jsx_runtime.jsx)(src_App,{})})]}));// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
src_reportWebVitals();

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [216], () => (__webpack_exec__(8575)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=main.be05658d.js.map